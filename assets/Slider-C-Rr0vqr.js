import{d as te,c as I,a as oe,e as ie,b as O,i as le,h as ge}from"./utils-HuDI8Qn7.js";import{c as ue,a as se}from"./Label-B4tzsfJl.js";import{$ as de}from"./filterDOMProps-CeZl_uWj.js";import{r as c,e as Y}from"./index-KmaxkdDD.js";import{d as B,b as j,c as ce,a as he}from"./useNumberFormatter-0Jg9Jb_k.js";import{$ as ve}from"./useControlledState-TGcPotj3.js";import{p as W,q as $e,r as Pe,n as Te,s as _e,t as we,c as ye,$ as fe,a as De}from"./useFocusRing-sAzOUMLq.js";import{$ as xe}from"./useFormReset-n6f-ydtP.js";import{$ as Me}from"./VisuallyHidden-B1KWtvNn.js";function be(o){let{onMoveStart:e,onMove:t,onMoveEnd:s}=o,f=c.useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:l,removeGlobalListener:w}=W(),T=te((i,g,m,a)=>{m===0&&a===0||(f.current.didMove||(f.current.didMove=!0,e==null||e({type:"movestart",pointerType:g,shiftKey:i.shiftKey,metaKey:i.metaKey,ctrlKey:i.ctrlKey,altKey:i.altKey})),t==null||t({type:"move",pointerType:g,deltaX:m,deltaY:a,shiftKey:i.shiftKey,metaKey:i.metaKey,ctrlKey:i.ctrlKey,altKey:i.altKey}))}),_=te((i,g)=>{$e(),f.current.didMove&&(s==null||s({type:"moveend",pointerType:g,shiftKey:i.shiftKey,metaKey:i.metaKey,ctrlKey:i.ctrlKey,altKey:i.altKey}))});return{moveProps:c.useMemo(()=>{let i={},g=()=>{Pe(),f.current.didMove=!1};typeof PointerEvent>"u";{let a=d=>{if(d.pointerId===f.current.id){var h,r;let $=d.pointerType||"mouse";var b,v;T(d,$,d.pageX-((b=(h=f.current.lastPosition)===null||h===void 0?void 0:h.pageX)!==null&&b!==void 0?b:0),d.pageY-((v=(r=f.current.lastPosition)===null||r===void 0?void 0:r.pageY)!==null&&v!==void 0?v:0)),f.current.lastPosition={pageX:d.pageX,pageY:d.pageY}}},y=d=>{if(d.pointerId===f.current.id){let h=d.pointerType||"mouse";_(d,h),f.current.id=null,w(window,"pointermove",a,!1),w(window,"pointerup",y,!1),w(window,"pointercancel",y,!1)}};i.onPointerDown=d=>{d.button===0&&f.current.id==null&&(g(),d.stopPropagation(),d.preventDefault(),f.current.lastPosition={pageX:d.pageX,pageY:d.pageY},f.current.id=d.pointerId,l(window,"pointermove",a,!1),l(window,"pointerup",y,!1),l(window,"pointercancel",y,!1))}}let m=(a,y,d)=>{g(),T(a,"keyboard",y,d),_(a,"keyboard")};return i.onKeyDown=a=>{switch(a.key){case"Left":case"ArrowLeft":a.preventDefault(),a.stopPropagation(),m(a,-1,0);break;case"Right":case"ArrowRight":a.preventDefault(),a.stopPropagation(),m(a,1,0);break;case"Up":case"ArrowUp":a.preventDefault(),a.stopPropagation(),m(a,0,-1);break;case"Down":case"ArrowDown":a.preventDefault(),a.stopPropagation(),m(a,0,1);break}},i},[f,l,w,T,_])}}const Ve=0,Ke=100,Re=1;function ke(o){const{isDisabled:e=!1,minValue:t=Ve,maxValue:s=Ke,numberFormatter:f,step:l=Re,orientation:w="horizontal"}=o;let T=c.useMemo(()=>{let n=(s-t)/10;return n=B(n,0,n+l,l),Math.max(n,l)},[l,s,t]),_=c.useCallback(n=>n==null?void 0:n.map((p,x)=>{let A=x===0?t:n[x-1],H=x===n.length-1?s:n[x+1];return B(p,A,H,l)}),[t,s,l]),M=c.useMemo(()=>_(re(o.value)),[o.value]),i=c.useMemo(()=>{var n;return _((n=re(o.defaultValue))!==null&&n!==void 0?n:[t])},[o.defaultValue,t]),g=ae(o.value,o.defaultValue,o.onChange),m=ae(o.value,o.defaultValue,o.onChangeEnd);const[a,y]=ve(M,i,g),[d,h]=c.useState(new Array(a.length).fill(!1)),r=c.useRef(new Array(a.length).fill(!0)),[b,v]=c.useState(void 0),$=c.useRef(a),P=c.useRef(d);let D=n=>{$.current=n,y(n)},k=n=>{P.current=n,h(n)};function S(n){return(n-t)/(s-t)}function G(n){return n===0?t:a[n-1]}function U(n){return n===a.length-1?s:a[n+1]}function X(n){return r.current[n]}function C(n,p){r.current[n]=p}function V(n,p){if(e||!X(n))return;const x=G(n),A=U(n);p=B(p,x,A,l);let H=ne($.current,n,p);D(H)}function L(n,p){if(e||!X(n))return;p&&($.current=a);const x=P.current[n];P.current=ne(P.current,n,p),k(P.current),m&&x&&!P.current.some(Boolean)&&m($.current)}function K(n){return f.format(n)}function u(n,p){V(n,E(p))}function R(n){return Math.round((n-t)/l)*l+t}function E(n){const p=n*(s-t)+t;return j(R(p),t,s)}function F(n,p=1){let x=Math.max(p,l);V(n,B(a[n]+x,t,s,l))}function z(n,p=1){let x=Math.max(p,l);V(n,B(a[n]-x,t,s,l))}return{values:a,getThumbValue:n=>a[n],setThumbValue:V,setThumbPercent:u,isThumbDragging:n=>d[n],setThumbDragging:L,focusedThumb:b,setFocusedThumb:v,getThumbPercent:n=>S(a[n]),getValuePercent:S,getThumbValueLabel:n=>K(a[n]),getFormattedValue:K,getThumbMinValue:G,getThumbMaxValue:U,getPercentValue:E,isThumbEditable:X,setThumbEditable:C,incrementThumb:F,decrementThumb:z,step:l,pageSize:T,orientation:w,isDisabled:e}}function ne(o,e,t){return o[e]===t?o:[...o.slice(0,e),t,...o.slice(e+1)]}function re(o){if(o!=null)return Array.isArray(o)?o:[o]}function ae(o,e,t){return s=>{typeof o=="number"||typeof e=="number"?t==null||t(s[0]):t==null||t(s)}}const J=new WeakMap;function N(o,e){let t=J.get(o);if(!t)throw new Error("Unknown slider state");return`${t.id}-${e}`}function Ee(o,e,t){let{labelProps:s,fieldProps:f}=ue(o),l=o.orientation==="vertical";var w;J.set(e,{id:(w=s.id)!==null&&w!==void 0?w:f.id,"aria-describedby":o["aria-describedby"],"aria-details":o["aria-details"]});let{direction:T}=ce(),{addGlobalListener:_,removeGlobalListener:M}=W();const i=c.useRef(null),g=T==="rtl",m=c.useRef(null),{moveProps:a}=be({onMoveStart(){m.current=null},onMove({deltaX:r,deltaY:b}){if(!t.current)return;let{height:v,width:$}=t.current.getBoundingClientRect(),P=l?v:$;m.current==null&&i.current!=null&&(m.current=e.getThumbPercent(i.current)*P);let D=l?b:r;if((l||g)&&(D=-D),m.current+=D,i.current!=null&&t.current){const k=j(m.current/P,0,1);e.setThumbPercent(i.current,k)}},onMoveEnd(){i.current!=null&&(e.setThumbDragging(i.current,!1),i.current=null)}});let y=c.useRef(void 0),d=(r,b,v,$)=>{if(t.current&&!o.isDisabled&&e.values.every((P,D)=>!e.isThumbDragging(D))){let{height:P,width:D,top:k,left:S}=t.current.getBoundingClientRect(),G=l?P:D,V=((l?$:v)-(l?k:S))/G;(T==="rtl"||l)&&(V=1-V);let L=e.getPercentValue(V),K,u=e.values.findIndex(R=>L-R<0);if(u===0)K=u;else if(u===-1)K=e.values.length-1;else{let R=e.values[u-1],E=e.values[u];Math.abs(R-L)<Math.abs(E-L)?K=u-1:K=u}K>=0&&e.isThumbEditable(K)?(r.preventDefault(),i.current=K,e.setFocusedThumb(K),y.current=b,e.setThumbDragging(i.current,!0),e.setThumbValue(K,L),_(window,"mouseup",h,!1),_(window,"touchend",h,!1),_(window,"pointerup",h,!1)):i.current=null}},h=r=>{var b,v;((v=r.pointerId)!==null&&v!==void 0?v:(b=r.changedTouches)===null||b===void 0?void 0:b[0].identifier)===y.current&&(i.current!=null&&(e.setThumbDragging(i.current,!1),i.current=null),M(window,"mouseup",h,!1),M(window,"touchend",h,!1),M(window,"pointerup",h,!1))};return"htmlFor"in s&&s.htmlFor&&(delete s.htmlFor,s.onClick=()=>{var r;(r=document.getElementById(N(e,0)))===null||r===void 0||r.focus(),Te("keyboard")}),{labelProps:s,groupProps:{role:"group",...f},trackProps:I({onMouseDown(r){r.button!==0||r.altKey||r.ctrlKey||r.metaKey||d(r,void 0,r.clientX,r.clientY)},onPointerDown(r){r.pointerType==="mouse"&&(r.button!==0||r.altKey||r.ctrlKey||r.metaKey)||d(r,r.pointerId,r.clientX,r.clientY)},onTouchStart(r){d(r,r.changedTouches[0].identifier,r.changedTouches[0].clientX,r.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},a),outputProps:{htmlFor:e.values.map((r,b)=>N(e,b)).join(" "),"aria-live":"off"}}}function Le(o,e){let{index:t=0,isRequired:s,validationState:f,isInvalid:l,trackRef:w,inputRef:T,orientation:_=e.orientation,name:M}=o,i=o.isDisabled||e.isDisabled,g=_==="vertical",{direction:m}=ce(),{addGlobalListener:a,removeGlobalListener:y}=W(),d=J.get(e);var h;const{labelProps:r,fieldProps:b}=ue({...o,id:N(e,t),"aria-labelledby":`${d.id} ${(h=o["aria-labelledby"])!==null&&h!==void 0?h:""}`.trim()}),v=e.values[t],$=c.useCallback(()=>{T.current&&_e(T.current)},[T]),P=e.focusedThumb===t;c.useEffect(()=>{P&&$()},[P,$]);let D=m==="rtl",k=c.useRef(null),{keyboardProps:S}=we({onKeyDown(u){let{getThumbMaxValue:R,getThumbMinValue:E,decrementThumb:F,incrementThumb:z,setThumbValue:n,setThumbDragging:p,pageSize:x}=e;if(!/^(PageUp|PageDown|Home|End)$/.test(u.key)){u.continuePropagation();return}switch(u.preventDefault(),p(t,!0),u.key){case"PageUp":z(t,x);break;case"PageDown":F(t,x);break;case"Home":n(t,E(t));break;case"End":n(t,R(t));break}p(t,!1)}}),{moveProps:G}=be({onMoveStart(){k.current=null,e.setThumbDragging(t,!0)},onMove({deltaX:u,deltaY:R,pointerType:E,shiftKey:F}){const{getThumbPercent:z,setThumbPercent:n,decrementThumb:p,incrementThumb:x,step:A,pageSize:H}=e;if(!w.current)return;let{width:me,height:pe}=w.current.getBoundingClientRect(),ee=g?pe:me;if(k.current==null&&(k.current=z(t)*ee),E==="keyboard")u>0&&D||u<0&&!D||R>0?p(t,F?H:A):x(t,F?H:A);else{let q=g?R:u;(g||D)&&(q=-q),k.current+=q,n(t,j(k.current/ee,0,1))}},onMoveEnd(){e.setThumbDragging(t,!1)}});e.setThumbEditable(t,!i);const{focusableProps:U}=ye(I(o,{onFocus:()=>e.setFocusedThumb(t),onBlur:()=>e.setFocusedThumb(void 0)}),T);let X=c.useRef(void 0),C=u=>{$(),X.current=u,e.setThumbDragging(t,!0),a(window,"mouseup",V,!1),a(window,"touchend",V,!1),a(window,"pointerup",V,!1)},V=u=>{var R,E;((E=u.pointerId)!==null&&E!==void 0?E:(R=u.changedTouches)===null||R===void 0?void 0:R[0].identifier)===X.current&&($(),e.setThumbDragging(t,!1),y(window,"mouseup",V,!1),y(window,"touchend",V,!1),y(window,"pointerup",V,!1))},L=e.getThumbPercent(t);(g||m==="rtl")&&(L=1-L);let K=i?{}:I(S,G,{onMouseDown:u=>{u.button!==0||u.altKey||u.ctrlKey||u.metaKey||C()},onPointerDown:u=>{u.button!==0||u.altKey||u.ctrlKey||u.metaKey||C(u.pointerId)},onTouchStart:u=>{C(u.changedTouches[0].identifier)}});return xe(T,v,u=>{e.setThumbValue(t,u)}),{inputProps:I(U,b,{type:"range",tabIndex:i?void 0:0,min:e.getThumbMinValue(t),max:e.getThumbMaxValue(t),step:e.step,value:v,name:M,disabled:i,"aria-orientation":_,"aria-valuetext":e.getThumbValueLabel(t),"aria-required":s||void 0,"aria-invalid":l||f==="invalid"||void 0,"aria-errormessage":o["aria-errormessage"],"aria-describedby":[d["aria-describedby"],o["aria-describedby"]].filter(Boolean).join(" "),"aria-details":[d["aria-details"],o["aria-details"]].filter(Boolean).join(" "),onChange:u=>{e.setThumbValue(t,parseFloat(u.target.value))}}),thumbProps:{...K,style:{position:"absolute",[g?"top":"left"]:`${L*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:r,isDragging:e.isThumbDragging(t),isDisabled:i,isFocused:P}}const Se=c.createContext(null),Q=c.createContext(null),Z=c.createContext(null),Xe=c.createContext(null),Be=c.forwardRef(function(e,t){[e,t]=oe(e,t,Se);let s=c.useRef(null),f=he(e.formatOptions),l=ke({...e,numberFormatter:f}),[w,T]=ie(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:_,trackProps:M,labelProps:i,outputProps:g}=Ee({...e,label:T},l,s),m=O({...e,values:{orientation:l.orientation,isDisabled:l.isDisabled,state:l},defaultClassName:"react-aria-Slider"}),a=de(e);return delete a.id,Y.createElement(le,{values:[[Q,l],[Z,{...M,ref:s}],[Xe,g],[se,{...i,ref:w}]]},Y.createElement("div",{...a,..._,...m,ref:t,slot:e.slot||void 0,"data-orientation":l.orientation,"data-disabled":l.isDisabled||void 0}))}),qe=c.forwardRef(function(e,t){[e,t]=oe(e,t,Z);let s=c.useContext(Q),{onHoverStart:f,onHoverEnd:l,onHoverChange:w,...T}=e,{hoverProps:_,isHovered:M}=fe({onHoverStart:f,onHoverEnd:l,onHoverChange:w}),i=O({...e,defaultClassName:"react-aria-SliderTrack",values:{orientation:s.orientation,isDisabled:s.isDisabled,isHovered:M,state:s}});return Y.createElement("div",{...I(T,_),...i,ref:t,"data-hovered":M||void 0,"data-orientation":s.orientation||void 0,"data-disabled":s.isDisabled||void 0})}),Ne=c.forwardRef(function(e,t){let{inputRef:s=null}=e,f=c.useContext(Q),{ref:l}=ge(Z),{index:w=0}=e,T=c.useRef(null),_=s||T,[M,i]=ie(!e["aria-label"]&&!e["aria-labelledby"]),{thumbProps:g,inputProps:m,labelProps:a,isDragging:y,isFocused:d,isDisabled:h}=Le({...e,index:w,trackRef:l,inputRef:_,label:i},f),{focusProps:r,isFocusVisible:b}=De(),{hoverProps:v,isHovered:$}=fe(e),P=O({...e,defaultClassName:"react-aria-SliderThumb",values:{state:f,isHovered:$,isDragging:y,isFocused:d,isFocusVisible:b,isDisabled:h}}),D=de(e);return delete D.id,Y.createElement("div",{...I(D,g,v),...P,ref:t,style:{...g.style,...P.style},"data-hovered":$||void 0,"data-dragging":y||void 0,"data-focused":d||void 0,"data-focus-visible":b||void 0,"data-disabled":h||void 0},Y.createElement(Me,null,Y.createElement("input",{ref:_,...I(m,r)})),Y.createElement(le,{values:[[se,{...a,ref:M}]]},P.children))});export{qe as $,Ne as a,Be as b};
