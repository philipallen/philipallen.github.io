import{a as m}from"./Button-Dm6TiVPZ.js";import{b as x,e as v,i as C,j as s}from"./useFocusRing-8RL9AhDF.js";import{a as g}from"./RSPContexts-BdMZCg0Y.js";import{c as $,$ as u}from"./focusSafely-CjmyL4wt.js";import{r as l,R as c}from"./index-DH5ua8nC.js";import{d as p,e as y}from"./useFocusWithin-D15f1-3B.js";import{a as E}from"./usePress-BnN3djkX.js";import{$ as P}from"./FocusScope-92UDUlTt.js";import{R}from"./index-D9uilScg.js";import{$ as h}from"./chain-Crd5RmWG.js";function D({children:t}){let e=l.useMemo(()=>({register:()=>{}}),[]);return c.createElement(E.Provider,{value:e},t)}const M=l.createContext({});function I(){var t;return(t=l.useContext(M))!==null&&t!==void 0?t:{}}const f=c.createContext(null);function q(t){let e=p(),{portalContainer:o=e?null:document.body,isExiting:r}=t,[a,n]=l.useState(!1),i=l.useMemo(()=>({contain:a,setContain:n}),[a,n]),{getContainer:d}=I();if(!t.portalContainer&&d&&(o=d()),!o)return null;let b=t.children;return t.disableFocusManagement||(b=c.createElement(P,{restoreFocus:!0,contain:a&&!r},b)),b=c.createElement(f.Provider,{value:i},c.createElement(D,null,b)),R.createPortal(b,o)}function N(){let t=l.useContext(f),e=t==null?void 0:t.setContain;h(()=>{e==null||e(!0)},[e])}function S(t,e){let{role:o="dialog"}=t,r=y();r=t["aria-label"]?void 0:r;let a=l.useRef(!1);return l.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){$(e.current);let n=setTimeout(()=>{document.activeElement===e.current&&(a.current=!0,e.current&&(e.current.blur(),$(e.current)),a.current=!1)},500);return()=>{clearTimeout(n)}}},[e]),N(),{dialogProps:{...u(t,{labelable:!0}),role:o,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||r,onBlur:n=>{a.current&&n.stopPropagation()}},titleProps:{id:r}}}const _=l.createContext(null),w=l.createContext(null),z=l.forwardRef(function(e,o){let r=e["aria-labelledby"];[e,o]=x(e,o,_);let{dialogProps:a,titleProps:n}=S({...e,"aria-labelledby":r},o),i=l.useContext(w);!a["aria-label"]&&!a["aria-labelledby"]&&(e["aria-labelledby"]?a["aria-labelledby"]=e["aria-labelledby"]:console.warn('If a Dialog does not contain a <Heading slot="title">, it must have an aria-label or aria-labelledby attribute for accessibility.'));let d=v({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:(i==null?void 0:i.close)||(()=>{})}});return c.createElement("section",{...u(e),...a,...d,ref:o,slot:e.slot||void 0},c.createElement(C,{values:[[g,{slots:{[s]:{},title:{...n,level:2}}}],[m,{slots:{[s]:{},close:{onPress:()=>i==null?void 0:i.close()}}}]]},d.children))});export{z as $,w as a,q as b,_ as c};
