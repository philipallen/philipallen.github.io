import{w as Z,e as oe,u as U,j as p,i as c,y as le,v as N,g as D,z,A as V,d as F,B as ue}from"./useHover-DDDaVluF.js";import{r as S,e as fe}from"./index-KmaxkdDD.js";import{a as ce}from"./chain-Z-ySmOka.js";import{e as C,c as ee}from"./utils-l5KLAjAw.js";import{c as de,d as R,e as pe,f as ge}from"./platform-kF5l1-53.js";import{r as ve}from"./index-CVhlOzZO.js";const ye=S.createContext({isNative:!0,open:he,useHref:r=>r});function Te(){return S.useContext(ye)}function M(r,n,a=!0){var o,d;let{metaKey:v,ctrlKey:y,altKey:h,shiftKey:P}=n;de()&&(!((d=window.event)===null||d===void 0||(o=d.type)===null||o===void 0)&&o.startsWith("key"))&&r.target==="_blank"&&(R()?v=!0:y=!0);let K=pe()&&R()&&!ge()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:v,ctrlKey:y,altKey:h,shiftKey:P}):new MouseEvent("click",{metaKey:v,ctrlKey:y,altKey:h,shiftKey:P,bubbles:!0,cancelable:!0});M.isOpening=a,Z(r),r.dispatchEvent(K),M.isOpening=!1}M.isOpening=!1;function $e(r,n){if(r instanceof HTMLAnchorElement)n(r);else if(r.hasAttribute("data-href")){let a=document.createElement("a");a.href=r.getAttribute("data-href"),r.hasAttribute("data-target")&&(a.target=r.getAttribute("data-target")),r.hasAttribute("data-rel")&&(a.rel=r.getAttribute("data-rel")),r.hasAttribute("data-download")&&(a.download=r.getAttribute("data-download")),r.hasAttribute("data-ping")&&(a.ping=r.getAttribute("data-ping")),r.hasAttribute("data-referrer-policy")&&(a.referrerPolicy=r.getAttribute("data-referrer-policy")),r.appendChild(a),n(a),r.removeChild(a)}}function he(r,n){$e(r,a=>M(a,n))}function Xe(r){let n=Te();var a;const o=n.useHref((a=r==null?void 0:r.href)!==null&&a!==void 0?a:"");return{href:r!=null&&r.href?o:void 0,target:r==null?void 0:r.target,rel:r==null?void 0:r.rel,download:r==null?void 0:r.download,ping:r==null?void 0:r.ping,referrerPolicy:r==null?void 0:r.referrerPolicy}}const te=fe.createContext({register:()=>{}});te.displayName="PressResponderContext";function Pe(r,n){return n.get?n.get.call(r):n.value}function re(r,n,a){if(!n.has(r))throw new TypeError("attempted to "+a+" private field on non-instance");return n.get(r)}function be(r,n){var a=re(r,n,"get");return Pe(r,a)}function Ee(r,n){if(n.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function me(r,n,a){Ee(r,n),n.set(r,a)}function Ke(r,n,a){if(n.set)n.set.call(r,a);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=a}}function W(r,n,a){var o=re(r,n,"set");return Ke(r,o,a),a}function xe(r){let n=S.useContext(te);if(n){let{register:a,...o}=n;r=ee(o,r),a()}return ue(n,r.ref),r}var X=new WeakMap;class Y{continuePropagation(){W(this,X,!1)}get shouldStopPropagation(){return be(this,X)}constructor(n,a,o,d){me(this,X,{writable:!0,value:void 0}),W(this,X,!0);var v;let y=(v=d==null?void 0:d.target)!==null&&v!==void 0?v:o.currentTarget;const h=y==null?void 0:y.getBoundingClientRect();let P,K=0,T,I=null;o.clientX!=null&&o.clientY!=null&&(T=o.clientX,I=o.clientY),h&&(T!=null&&I!=null?(P=T-h.left,K=I-h.top):(P=h.width/2,K=h.height/2)),this.type=n,this.pointerType=a,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=P,this.y=K}}const j=Symbol("linkClicked");function Ye(r){let{onPress:n,onPressChange:a,onPressStart:o,onPressEnd:d,onPressUp:v,isDisabled:y,isPressed:h,preventFocusOnPress:P,shouldCancelOnPointerExit:K,allowTextSelectionOnPress:T,ref:I,...ie}=xe(r),[ae,G]=S.useState(!1),w=S.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:x,removeAllGlobalListeners:A}=oe(),E=C((e,s)=>{let g=w.current;if(y||g.didFirePressStart)return!1;let i=!0;if(g.isTriggeringEvent=!0,o){let f=new Y("pressstart",s,e);o(f),i=f.shouldStopPropagation}return a&&a(!0),g.isTriggeringEvent=!1,g.didFirePressStart=!0,G(!0),i}),b=C((e,s,g=!0)=>{let i=w.current;if(!i.didFirePressStart)return!1;i.didFirePressStart=!1,i.isTriggeringEvent=!0;let f=!0;if(d){let t=new Y("pressend",s,e);d(t),f=t.shouldStopPropagation}if(a&&a(!1),G(!1),n&&g&&!y){let t=new Y("press",s,e);n(t),f&&(f=t.shouldStopPropagation)}return i.isTriggeringEvent=!1,f}),k=C((e,s)=>{let g=w.current;if(y)return!1;if(v){g.isTriggeringEvent=!0;let i=new Y("pressup",s,e);return v(i),g.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),$=C(e=>{let s=w.current;if(s.isPressed&&s.target){s.didFirePressStart&&s.pointerType!=null&&b(_(s.target,e),s.pointerType,!1),s.isPressed=!1,s.isOverTarget=!1,s.activePointerId=null,s.pointerType=null,A(),T||U(s.target);for(let g of s.disposables)g();s.disposables=[]}}),L=C(e=>{K&&$(e)}),se=S.useMemo(()=>{let e=w.current,s={onKeyDown(i){if(H(i.nativeEvent,i.currentTarget)&&p(i.currentTarget,c(i.nativeEvent))){var f;Q(c(i.nativeEvent),i.key)&&i.preventDefault();let t=!0;if(!e.isPressed&&!i.repeat){e.target=i.currentTarget,e.isPressed=!0,e.pointerType="keyboard",t=E(i,"keyboard");let l=i.currentTarget,u=O=>{H(O,l)&&!O.repeat&&p(l,c(O))&&e.target&&k(_(e.target,O),"keyboard")};x(D(i.currentTarget),"keyup",ce(u,g),!0)}t&&i.stopPropagation(),i.metaKey&&R()&&((f=e.metaKeyEvents)===null||f===void 0||f.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(i){if(!(i&&!p(i.currentTarget,c(i.nativeEvent)))&&i&&i.button===0&&!e.isTriggeringEvent&&!M.isOpening){let f=!0;if(y&&i.preventDefault(),!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||V(i.nativeEvent))){let t=E(i,"virtual"),l=k(i,"virtual"),u=b(i,"virtual");f=t&&l&&u}else if(e.isPressed&&e.pointerType!=="keyboard"){let t=e.pointerType||i.nativeEvent.pointerType||"virtual";f=b(_(i.currentTarget,i),t,!0),e.isOverTarget=!1,$(i)}e.ignoreEmulatedMouseEvents=!1,f&&i.stopPropagation()}}},g=i=>{var f;if(e.isPressed&&e.target&&H(i,e.target)){var t;Q(c(i),i.key)&&i.preventDefault();let u=c(i);b(_(e.target,i),"keyboard",p(e.target,c(i))),A(),i.key!=="Enter"&&B(e.target)&&p(e.target,u)&&!i[j]&&(i[j]=!0,M(e.target,i,!1)),e.isPressed=!1,(t=e.metaKeyEvents)===null||t===void 0||t.delete(i.key)}else if(i.key==="Meta"&&(!((f=e.metaKeyEvents)===null||f===void 0)&&f.size)){var l;let u=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let O of u.values())(l=e.target)===null||l===void 0||l.dispatchEvent(new KeyboardEvent("keyup",O))}};if(typeof PointerEvent<"u"){s.onPointerDown=t=>{if(t.button!==0||!p(t.currentTarget,c(t.nativeEvent)))return;if(le(t.nativeEvent)){e.pointerType="virtual";return}e.pointerType=t.pointerType;let l=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,T||N(e.target),l=E(t,e.pointerType);let u=c(t.nativeEvent);"releasePointerCapture"in u&&u.releasePointerCapture(t.pointerId),x(D(t.currentTarget),"pointerup",i,!1),x(D(t.currentTarget),"pointercancel",f,!1)}l&&t.stopPropagation()},s.onMouseDown=t=>{if(p(t.currentTarget,c(t.nativeEvent))&&t.button===0){if(P){let l=z(t.target);l&&e.disposables.push(l)}t.stopPropagation()}},s.onPointerUp=t=>{!p(t.currentTarget,c(t.nativeEvent))||e.pointerType==="virtual"||t.button===0&&k(t,e.pointerType||t.pointerType)},s.onPointerEnter=t=>{t.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,E(_(e.target,t),e.pointerType))},s.onPointerLeave=t=>{t.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,b(_(e.target,t),e.pointerType,!1),L(t))};let i=t=>{if(t.pointerId===e.activePointerId&&e.isPressed&&t.button===0&&e.target){if(p(e.target,c(t))&&e.pointerType!=null){let l=!1,u=setTimeout(()=>{e.isPressed&&e.target instanceof HTMLElement&&(l?$(t):(Z(e.target),e.target.click()))},80);x(t.currentTarget,"click",()=>l=!0,!0),e.disposables.push(()=>clearTimeout(u))}else $(t);e.isOverTarget=!1}},f=t=>{$(t)};s.onDragStart=t=>{p(t.currentTarget,c(t.nativeEvent))&&$(t)}}else{s.onMouseDown=t=>{if(t.button!==0||!p(t.currentTarget,c(t.nativeEvent)))return;if(e.ignoreEmulatedMouseEvents){t.stopPropagation();return}if(e.isPressed=!0,e.isOverTarget=!0,e.target=t.currentTarget,e.pointerType=V(t.nativeEvent)?"virtual":"mouse",ve.flushSync(()=>E(t,e.pointerType))&&t.stopPropagation(),P){let u=z(t.target);u&&e.disposables.push(u)}x(D(t.currentTarget),"mouseup",i,!1)},s.onMouseEnter=t=>{if(!p(t.currentTarget,c(t.nativeEvent)))return;let l=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,l=E(t,e.pointerType)),l&&t.stopPropagation()},s.onMouseLeave=t=>{if(!p(t.currentTarget,c(t.nativeEvent)))return;let l=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,l=b(t,e.pointerType,!1),L(t)),l&&t.stopPropagation()},s.onMouseUp=t=>{p(t.currentTarget,c(t.nativeEvent))&&!e.ignoreEmulatedMouseEvents&&t.button===0&&k(t,e.pointerType||"mouse")};let i=t=>{if(t.button===0){if(e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&e.target.contains(t.target)&&e.pointerType!=null||$(t),e.isOverTarget=!1}};s.onTouchStart=t=>{if(!p(t.currentTarget,c(t.nativeEvent)))return;let l=Se(t.nativeEvent);if(!l)return;e.activePointerId=l.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=t.currentTarget,e.pointerType="touch",T||N(e.target),E(m(e.target,t),e.pointerType)&&t.stopPropagation(),x(F(t.currentTarget),"scroll",f,!0)},s.onTouchMove=t=>{if(!p(t.currentTarget,c(t.nativeEvent)))return;if(!e.isPressed){t.stopPropagation();return}let l=q(t.nativeEvent,e.activePointerId),u=!0;l&&J(l,t.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,u=E(m(e.target,t),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,u=b(m(e.target,t),e.pointerType,!1),L(m(e.target,t))),u&&t.stopPropagation()},s.onTouchEnd=t=>{if(!p(t.currentTarget,c(t.nativeEvent)))return;if(!e.isPressed){t.stopPropagation();return}let l=q(t.nativeEvent,e.activePointerId),u=!0;l&&J(l,t.currentTarget)&&e.pointerType!=null?(k(m(e.target,t),e.pointerType),u=b(m(e.target,t),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(u=b(m(e.target,t),e.pointerType,!1)),u&&t.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!T&&U(e.target),A()},s.onTouchCancel=t=>{p(t.currentTarget,c(t.nativeEvent))&&(t.stopPropagation(),e.isPressed&&$(m(e.target,t)))};let f=t=>{e.isPressed&&p(c(t),e.target)&&$({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};s.onDragStart=t=>{p(t.currentTarget,c(t.nativeEvent))&&$(t)}}return s},[x,y,P,A,T,$,L,b,E,k]);return S.useEffect(()=>{let e=w.current;return()=>{var s;T||U((s=e.target)!==null&&s!==void 0?s:void 0);for(let g of e.disposables)g();e.disposables=[]}},[T]),{isPressed:h||ae,pressProps:ee(ie,se)}}function B(r){return r.tagName==="A"&&r.hasAttribute("href")}function H(r,n){const{key:a,code:o}=r,d=n,v=d.getAttribute("role");return(a==="Enter"||a===" "||a==="Spacebar"||o==="Space")&&!(d instanceof F(d).HTMLInputElement&&!ne(d,a)||d instanceof F(d).HTMLTextAreaElement||d.isContentEditable)&&!((v==="link"||!v&&B(d))&&a!=="Enter")}function Se(r){const{targetTouches:n}=r;return n.length>0?n[0]:null}function q(r,n){const a=r.changedTouches;for(let o=0;o<a.length;o++){const d=a[o];if(d.identifier===n)return d}return null}function m(r,n){let a=0,o=0;return n.targetTouches&&n.targetTouches.length===1&&(a=n.targetTouches[0].clientX,o=n.targetTouches[0].clientY),{currentTarget:r,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:a,clientY:o}}function _(r,n){let a=n.clientX,o=n.clientY;return{currentTarget:r,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:a,clientY:o}}function we(r){let n=0,a=0;return r.width!==void 0?n=r.width/2:r.radiusX!==void 0&&(n=r.radiusX),r.height!==void 0?a=r.height/2:r.radiusY!==void 0&&(a=r.radiusY),{top:r.clientY-a,right:r.clientX+n,bottom:r.clientY+a,left:r.clientX-n}}function ke(r,n){return!(r.left>n.right||n.left>r.right||r.top>n.bottom||n.top>r.bottom)}function J(r,n){let a=n.getBoundingClientRect(),o=we(r);return ke(a,o)}function Oe(r){return r instanceof HTMLInputElement?!1:r instanceof HTMLButtonElement?r.type!=="submit"&&r.type!=="reset":!B(r)}function Q(r,n){return r instanceof HTMLInputElement?!ne(r,n):Oe(r)}const _e=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ne(r,n){return r.type==="checkbox"||r.type==="radio"?n===" ":_e.has(r.type)}export{Ye as $,me as _,Te as a,Xe as b,M as c,te as d};
