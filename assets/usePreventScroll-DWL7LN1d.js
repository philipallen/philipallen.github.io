import{j as g,k as $}from"./utils-HuDI8Qn7.js";import{$ as v}from"./isScrollable-BSEN4xi5.js";import{$ as T}from"./platform-COItUIJl.js";function b(e,n){let t=e;for(v(t,n)&&(t=t.parentElement);t&&!v(t,n);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const m=typeof document<"u"&&window.visualViewport,y=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let s=0,f;function C(e={}){let{isDisabled:n}=e;g(()=>{if(!n)return s++,s===1&&(T()?f=S():f=x()),()=>{s--,s===0&&f()}},[n])}function x(){return $(r(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),r(document.documentElement,"overflow","hidden"))}function S(){let e,n,t=c=>{e=b(c.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(n=r(e,"overscrollBehavior","contain"))},o=c=>{if(!e||e===document.documentElement||e===document.body){c.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&c.preventDefault()},u=()=>{n&&n()},a=c=>{let l=c.target;H(l)&&(E(),l.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{l.style.transform="",m&&(m.height<window.innerHeight?requestAnimationFrame(()=>{w(l)}):m.addEventListener("resize",()=>w(l),{once:!0}))}))},d=null,E=()=>{if(d)return;let c=()=>{window.scrollTo(0,0)},l=window.pageXOffset,p=window.pageYOffset;d=$(i(window,"scroll",c),r(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),r(document.documentElement,"overflow","hidden"),r(document.body,"marginTop",`-${p}px`),()=>{window.scrollTo(l,p)}),window.scrollTo(0,0)},h=$(i(document,"touchstart",t,{passive:!1,capture:!0}),i(document,"touchmove",o,{passive:!1,capture:!0}),i(document,"touchend",u,{passive:!1,capture:!0}),i(document,"focus",a,!0));return()=>{n==null||n(),d==null||d(),h()}}function r(e,n,t){let o=e.style[n];return e.style[n]=t,()=>{e.style[n]=o}}function i(e,n,t,o){return e.addEventListener(n,t,o),()=>{e.removeEventListener(n,t,o)}}function w(e){let n=document.scrollingElement||document.documentElement,t=e;for(;t&&t!==n;){let o=b(t);if(o!==document.documentElement&&o!==document.body&&o!==t){let u=o.getBoundingClientRect().top,a=t.getBoundingClientRect().top;a>u+t.clientHeight&&(o.scrollTop+=a-u)}t=o.parentElement}}function H(e){return e instanceof HTMLInputElement&&!y.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}export{C as $,b as a};
