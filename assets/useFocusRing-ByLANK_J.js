import{a as Y,$ as J,c as le}from"./platform-COItUIJl.js";import{j as Q,d as de,c as V}from"./utils-gyFJKyBV.js";import{r as c,e as fe}from"./index-KmaxkdDD.js";const v=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},h=e=>e&&"window"in e&&e.window===e?e:v(e).defaultView||window;function be(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function $e(e){return be(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let pe=!1;function U(){return pe}function X(e,n){if(!U())return n&&e?e.contains(n):!1;if(!e||!n)return!1;let t=n;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:$e(t)?t=t.host:t=t.parentNode}return!1}const x=(e=document)=>{var n;if(!U())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((n=t.shadowRoot)===null||n===void 0)&&n.activeElement);)t=t.shadowRoot.activeElement;return t};function Z(e){return U()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function M(e){if(ve())e.focus({preventScroll:!0});else{let n=me(e);e.focus(),Ee(n)}}let S=null;function ve(){if(S==null){S=!1;try{document.createElement("div").focus({get preventScroll(){return S=!0,!0}})}catch{}}return S}function me(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function Ee(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}let T=new Map,O=new Set;function _(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let n=r=>{if(!e(r)||!r.target)return;let o=T.get(r.target);o||(o=new Set,T.set(r.target,o),r.target.addEventListener("transitioncancel",t,{once:!0})),o.add(r.propertyName)},t=r=>{if(!e(r)||!r.target)return;let o=T.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",t),T.delete(r.target)),T.size===0)){for(let s of O)s();O.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?_():document.addEventListener("DOMContentLoaded",_));function ee(e){requestAnimationFrame(()=>{T.size===0?e():O.add(e)})}function te(){let e=c.useRef(new Map),n=c.useCallback((o,s,u,a)=>{let i=a!=null&&a.once?(...f)=>{e.current.delete(u),u(...f)}:u;e.current.set(u,{type:s,eventTarget:o,fn:i,options:a}),o.addEventListener(s,i,a)},[]),t=c.useCallback((o,s,u,a)=>{var i;let f=((i=e.current.get(u))===null||i===void 0?void 0:i.fn)||u;o.removeEventListener(s,f,a),e.current.delete(u)},[]),r=c.useCallback(()=>{e.current.forEach((o,s)=>{t(o.eventTarget,o.type,s,o.options)})},[t]);return c.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:t,removeAllGlobalListeners:r}}function ge(e,n){Q(()=>{if(e&&e.ref&&n)return e.ref.current=n.current,()=>{e.ref&&(e.ref.current=null)}})}function he(e){return e.mozInputSource===0&&e.isTrusted?!0:Y()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Ke(e){return!Y()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}const j=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],Le=j.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";j.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const ye=j.join(':not([hidden]):not([tabindex="-1"]),');function Te(e){return e.matches(Le)}function Ne(e){return e.matches(ye)}let w="default",B="",H=new WeakMap;function Re(e){if(J()){if(w==="default"){const n=v(e);B=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}w="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let n="userSelect"in e.style?"userSelect":"webkitUserSelect";H.set(e,e.style[n]),e.style[n]="none"}}function Ue(e){if(J()){if(w!=="disabled")return;w="restoring",setTimeout(()=>{ee(()=>{if(w==="restoring"){const n=v(e);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=B||""),B="",w="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&H.has(e)){let n=H.get(e),t="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[t]==="none"&&(e.style[t]=n),e.getAttribute("style")===""&&e.removeAttribute("style"),H.delete(e)}}class ne{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function re(e){let n=c.useRef({isFocused:!1,observer:null});Q(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=de(r=>{e==null||e(r)});return c.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,s=u=>{n.current.isFocused=!1,o.disabled&&t(new ne("blur",u)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var u;(u=n.current.observer)===null||u===void 0||u.disconnect();let a=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let k=!1;function je(e){for(;e&&!Te(e);)e=e.parentElement;let n=h(e),t=n.document.activeElement;if(!t||t===e)return;k=!0;let r=!1,o=d=>{(d.target===t||r)&&d.stopImmediatePropagation()},s=d=>{(d.target===t||r)&&(d.stopImmediatePropagation(),!e&&!r&&(r=!0,M(t),i()))},u=d=>{(d.target===e||r)&&d.stopImmediatePropagation()},a=d=>{(d.target===e||r)&&(d.stopImmediatePropagation(),r||(r=!0,M(t),i()))};n.addEventListener("blur",o,!0),n.addEventListener("focusout",s,!0),n.addEventListener("focusin",a,!0),n.addEventListener("focus",u,!0);let i=()=>{cancelAnimationFrame(f),n.removeEventListener("blur",o,!0),n.removeEventListener("focusout",s,!0),n.removeEventListener("focusin",a,!0),n.removeEventListener("focus",u,!0),k=!1,r=!1},f=requestAnimationFrame(i);return i}let y=null,A=new Set,P=new Map,L=!1,K=!1;const we={Tab:!0,Escape:!0};function I(e,n){for(let t of A)t(e,n)}function Fe(e){return!(e.metaKey||!le()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function C(e){L=!0,Fe(e)&&(y="keyboard",I("keyboard",e))}function $(e){y="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(L=!0,I("pointer",e))}function oe(e){he(e)&&(L=!0,y="virtual")}function ae(e){e.target===window||e.target===document||k||!e.isTrusted||(!L&&!K&&(y="virtual",I("virtual",e)),L=!1,K=!1)}function ie(){k||(L=!1,K=!0)}function N(e){if(typeof window>"u"||P.get(h(e)))return;const n=h(e),t=v(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){L=!0,r.apply(this,arguments)},t.addEventListener("keydown",C,!0),t.addEventListener("keyup",C,!0),t.addEventListener("click",oe,!0),n.addEventListener("focus",ae,!0),n.addEventListener("blur",ie,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",$,!0),t.addEventListener("pointermove",$,!0),t.addEventListener("pointerup",$,!0)):(t.addEventListener("mousedown",$,!0),t.addEventListener("mousemove",$,!0),t.addEventListener("mouseup",$,!0)),n.addEventListener("beforeunload",()=>{se(e)},{once:!0}),P.set(n,{focus:r})}const se=(e,n)=>{const t=h(e),r=v(e);n&&r.removeEventListener("DOMContentLoaded",n),P.has(t)&&(t.HTMLElement.prototype.focus=P.get(t).focus,r.removeEventListener("keydown",C,!0),r.removeEventListener("keyup",C,!0),r.removeEventListener("click",oe,!0),t.removeEventListener("focus",ae,!0),t.removeEventListener("blur",ie,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",$,!0),r.removeEventListener("pointermove",$,!0),r.removeEventListener("pointerup",$,!0)):(r.removeEventListener("mousedown",$,!0),r.removeEventListener("mousemove",$,!0),r.removeEventListener("mouseup",$,!0)),P.delete(t))};function Pe(e){const n=v(e);let t;return n.readyState!=="loading"?N(e):(t=()=>{N(e)},n.addEventListener("DOMContentLoaded",t)),()=>se(e,t)}typeof document<"u"&&Pe();function ue(){return y!=="pointer"}function xe(){return y}function Ve(e){y=e,I(e,null)}const Se=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function He(e,n,t){let r=v(t==null?void 0:t.target);const o=typeof window<"u"?h(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?h(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,u=typeof window<"u"?h(t==null?void 0:t.target).HTMLElement:HTMLElement,a=typeof window<"u"?h(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!Se.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof u&&r.activeElement.isContentEditable,!(e&&n==="keyboard"&&t instanceof a&&!we[t.key])}function Me(e,n,t){N(),c.useEffect(()=>{let r=(o,s)=>{He(!!(t!=null&&t.isTextInput),o,s)&&e(ue())};return A.add(r),()=>{A.delete(r)}},n)}function ke(e){const n=v(e),t=x(n);if(xe()==="virtual"){let r=t;ee(()=>{x(n)===r&&e.isConnected&&M(e)})}else M(e)}function ce(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const s=c.useCallback(i=>{if(i.target===i.currentTarget)return r&&r(i),o&&o(!1),!0},[r,o]),u=re(s),a=c.useCallback(i=>{const f=v(i.target),d=f?x(f):x();i.target===i.currentTarget&&d===Z(i.nativeEvent)&&(t&&t(i),o&&o(!0),u(i))},[o,t,u]);return{focusProps:{onFocus:!n&&(t||o||r)?a:void 0,onBlur:!n&&(r||o)?s:void 0}}}function z(e){if(!e)return;let n=!0;return t=>{let r={...t,preventDefault(){t.preventDefault()},isDefaultPrevented(){return t.isDefaultPrevented()},stopPropagation(){n?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):n=!0},continuePropagation(){n=!1},isPropagationStopped(){return n}};e(r),n&&t.stopPropagation()}}function Ce(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:z(e.onKeyDown),onKeyUp:z(e.onKeyUp)}}}let De=fe.createContext(null);function Ie(e){let n=c.useContext(De)||{};ge(n,e);let{ref:t,...r}=n;return r}function _e(e,n){let{focusProps:t}=ce(e),{keyboardProps:r}=Ce(e),o=V(t,r),s=Ie(n),u=e.isDisabled?{}:s,a=c.useRef(e.autoFocus);c.useEffect(()=>{a.current&&n.current&&ke(n.current),a.current=!1},[n]);let i=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(i=void 0),{focusableProps:V({...o,tabIndex:i},u)}}function We(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,s=c.useRef({isFocusWithin:!1}),{addGlobalListener:u,removeAllGlobalListeners:a}=te(),i=c.useCallback(b=>{b.currentTarget.contains(b.target)&&s.current.isFocusWithin&&!b.currentTarget.contains(b.relatedTarget)&&(s.current.isFocusWithin=!1,a(),t&&t(b),o&&o(!1))},[t,o,s,a]),f=re(i),d=c.useCallback(b=>{if(!b.currentTarget.contains(b.target))return;const g=v(b.target),p=x(g);if(!s.current.isFocusWithin&&p===Z(b.nativeEvent)){r&&r(b),o&&o(!0),s.current.isFocusWithin=!0,f(b);let m=b.currentTarget;u(g,"focus",l=>{if(s.current.isFocusWithin&&!X(m,l.target)){let E=new ne("blur",new g.defaultView.FocusEvent("blur",{relatedTarget:l.target}));E.target=m,E.currentTarget=m,i(E)}},{capture:!0})}},[r,o,f,u,i]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:i}}}let D=!1,G=0;function R(){D=!0,setTimeout(()=>{D=!1},50)}function q(e){e.pointerType==="touch"&&R()}function Ge(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",q):document.addEventListener("touchend",R),G++,()=>{G--,!(G>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",q):document.removeEventListener("touchend",R))}}function ze(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:r,isDisabled:o}=e,[s,u]=c.useState(!1),a=c.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;c.useEffect(Ge,[]);let{addGlobalListener:i,removeAllGlobalListeners:f}=te(),{hoverProps:d,triggerHoverEnd:b}=c.useMemo(()=>{let g=(l,E)=>{if(a.pointerType=E,o||E==="touch"||a.isHovered||!l.currentTarget.contains(l.target))return;a.isHovered=!0;let F=l.currentTarget;a.target=F,i(v(l.target),"pointerover",W=>{a.isHovered&&a.target&&!X(a.target,W.target)&&p(W,W.pointerType)},{capture:!0}),n&&n({type:"hoverstart",target:F,pointerType:E}),t&&t(!0),u(!0)},p=(l,E)=>{let F=a.target;a.pointerType="",a.target=null,!(E==="touch"||!a.isHovered||!F)&&(a.isHovered=!1,f(),r&&r({type:"hoverend",target:F,pointerType:E}),t&&t(!1),u(!1))},m={};return typeof PointerEvent<"u"?(m.onPointerEnter=l=>{D&&l.pointerType==="mouse"||g(l,l.pointerType)},m.onPointerLeave=l=>{!o&&l.currentTarget.contains(l.target)&&p(l,l.pointerType)}):(m.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},m.onMouseEnter=l=>{!a.ignoreEmulatedMouseEvents&&!D&&g(l,"mouse"),a.ignoreEmulatedMouseEvents=!1},m.onMouseLeave=l=>{!o&&l.currentTarget.contains(l.target)&&p(l,"mouse")}),{hoverProps:m,triggerHoverEnd:p}},[n,t,r,o,a,i,f]);return c.useEffect(()=>{o&&b({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:d,isHovered:s}}function qe(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=c.useRef({isFocused:!1,isFocusVisible:n||ue()}),[s,u]=c.useState(!1),[a,i]=c.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=c.useCallback(()=>i(o.current.isFocused&&o.current.isFocusVisible),[]),d=c.useCallback(p=>{o.current.isFocused=p,u(p),f()},[f]);Me(p=>{o.current.isFocusVisible=p,f()},[],{isTextInput:t});let{focusProps:b}=ce({isDisabled:r,onFocusChange:d}),{focusWithinProps:g}=We({isDisabled:!r,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:a,focusProps:r?g:b}}export{ze as $,qe as a,We as b,_e as c,h as d,U as e,X as f,x as g,v as h,ke as i,Ne as j,Te as k,Z as l,xe as m,Ve as n,ue as o,te as p,Ue as q,Re as r,M as s,Ce as t,ce as u,Ke as v,je as w,he as x,ge as y,De as z};
