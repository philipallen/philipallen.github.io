import{$ as N}from"./RSPContexts-BdMZCg0Y.js";import{f as p,b as M,k as _,$ as j,s as A,m as E,d as z,c as J,e as k,l as K,n as Q}from"./useFocusRing-CELWytXw.js";import{$ as B,b as U,e as F,a as X,f as Y,g as Z,c as w,d as ee}from"./Form-OUETqAF2.js";import{a as ae,b as ie}from"./useLabel-hJ0mwhYX.js";import{a as de}from"./Text-X8DQBs4N.js";import{$ as R,a as le}from"./useFocusWithin-Dp0pJUJ1.js";import{r as P,R as g}from"./index-DH5ua8nC.js";import{$ as S}from"./usePress-DAUyqWol.js";import{$ as te}from"./useFocusable-B98p06UY.js";import{$ as W}from"./useControlledState-BSXamw7l.js";import{$ as ne}from"./VisuallyHidden-C0e1y2IE.js";function se(a,e,d){let{isDisabled:n=!1,isReadOnly:s=!1,value:r,name:o,children:l,"aria-label":f,"aria-labelledby":i,validationState:t="valid",isInvalid:c}=a,v=y=>{y.stopPropagation(),e.setSelected(y.target.checked)},$=l!=null,u=f!=null||i!=null;!$&&!u&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:b,isPressed:m}=S({isDisabled:n}),{pressProps:h,isPressed:x}=S({isDisabled:n||s,onPress(){e.toggle()}}),{focusableProps:I}=te(a,d),V=R(b,I),D=p(a,{labelable:!0});return ae(d,e.isSelected,e.setSelected),{labelProps:R(h,{onClick:y=>y.preventDefault()}),inputProps:R(D,{"aria-invalid":c||t==="invalid"||void 0,"aria-errormessage":a["aria-errormessage"],"aria-controls":a["aria-controls"],"aria-readonly":s||void 0,onChange:v,disabled:n,...r==null?{}:{value:r},name:o,type:"checkbox",...V}),isSelected:e.isSelected,isPressed:m||x,isDisabled:n,isReadOnly:s,isInvalid:c||t==="invalid"}}function L(a,e,d){let n=B({...a,value:e.isSelected}),{isInvalid:s,validationErrors:r,validationDetails:o}=n.displayValidation,{labelProps:l,inputProps:f,isSelected:i,isPressed:t,isDisabled:c,isReadOnly:v}=se({...a,isInvalid:s},e,d);U(a,n,d);let{isIndeterminate:$,isRequired:u,validationBehavior:b="aria"}=a;P.useEffect(()=>{d.current&&(d.current.indeterminate=!!$)});let{pressProps:m}=S({isDisabled:c||v,onPress(){let{[F]:h}=a,{commitValidation:x}=h||n;x()}});return{labelProps:R(l,m),inputProps:{...f,checked:i,"aria-required":u&&b==="aria"||void 0,required:u&&b==="native"},isSelected:i,isPressed:t,isDisabled:c,isReadOnly:v,isInvalid:s,validationErrors:r,validationDetails:o}}const H=new WeakMap;function re(a,e){let{isDisabled:d,name:n,validationBehavior:s="aria"}=a,{isInvalid:r,validationErrors:o,validationDetails:l}=e.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:t,errorMessageProps:c}=X({...a,labelElementType:"span",isInvalid:r,errorMessage:a.errorMessage||o});H.set(e,{name:n,descriptionId:t.id,errorMessageId:c.id,validationBehavior:s});let v=p(a,{labelable:!0}),{focusWithinProps:$}=le({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:R(v,{role:"group","aria-disabled":d||void 0,...i,...$}),labelProps:f,descriptionProps:t,errorMessageProps:c,isInvalid:r,validationErrors:o,validationDetails:l}}function T(a={}){let{isReadOnly:e}=a,[d,n]=W(a.isSelected,a.defaultSelected||!1,a.onChange);function s(o){e||n(o)}function r(){e||n(!d)}return{isSelected:d,setSelected:s,toggle:r}}function oe(a,e,d){const n=T({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),onChange(m){m?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(m)}});let{name:s,descriptionId:r,errorMessageId:o,validationBehavior:l}=H.get(e);var f;l=(f=a.validationBehavior)!==null&&f!==void 0?f:l;let{realtimeValidation:i}=B({...a,value:n.isSelected,name:void 0,validationBehavior:"aria"}),t=P.useRef(Y),c=()=>{e.setInvalid(a.value,i.isInvalid?i:t.current)};P.useEffect(c);let v=e.realtimeValidation.isInvalid?e.realtimeValidation:i,$=l==="native"?e.displayValidation:v;var u;let b=L({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||s,isRequired:(u=a.isRequired)!==null&&u!==void 0?u:e.isRequired,validationBehavior:l,[F]:{realtimeValidation:v,displayValidation:$,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(m){t.current=m,c()}}},n,d);return{...b,inputProps:{...b.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?o:null,r].filter(Boolean).join(" ")||void 0}}}function ce(a={}){let[e,d]=W(a.value,a.defaultValue||[],a.onChange),n=!!a.isRequired&&e.length===0,s=P.useRef(new Map),r=B({...a,value:e}),o=r.displayValidation.isInvalid;var l;return{...r,value:e,setValue(i){a.isReadOnly||a.isDisabled||d(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||e.includes(i)||d(e.concat(i))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&d(e.filter(t=>t!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?d(e.filter(t=>t!==i)):d(e.concat(i)))},setInvalid(i,t){let c=new Map(s.current);t.isInvalid?c.set(i,t):c.delete(i),s.current=c,r.updateValidation(Z(...c.values()))},validationState:(l=a.validationState)!==null&&l!==void 0?l:o?"invalid":null,isInvalid:o,isRequired:n}}const fe=P.createContext(null),G=P.createContext(null),Ie=P.forwardRef(function(e,d){[e,d]=M(e,d,fe);let{validationBehavior:n}=_(w)||{};var s,r;let o=(r=(s=e.validationBehavior)!==null&&s!==void 0?s:n)!==null&&r!==void 0?r:"native",l=ce({...e,validationBehavior:o}),[f,i]=K(),{groupProps:t,labelProps:c,descriptionProps:v,errorMessageProps:$,...u}=re({...e,label:i,validationBehavior:o},l),b=k({...e,values:{isDisabled:l.isDisabled,isReadOnly:l.isReadOnly,isRequired:e.isRequired||!1,isInvalid:l.isInvalid,state:l},defaultClassName:"react-aria-CheckboxGroup"});return g.createElement("div",{...t,...b,ref:d,slot:e.slot||void 0,"data-readonly":l.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":l.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},g.createElement(Q,{values:[[G,l],[ie,{...c,ref:f,elementType:"span"}],[de,{slots:{description:v,errorMessage:$}}],[ee,u]]},b.children))}),Ve=P.forwardRef(function(e,d){let{inputRef:n=null,...s}=e;[e,d]=M(s,d,N);let{validationBehavior:r}=_(w)||{};var o,l;let f=(l=(o=e.validationBehavior)!==null&&o!==void 0?o:r)!==null&&l!==void 0?l:"native",i=P.useContext(G),t=j(A(n,e.inputRef!==void 0?e.inputRef:null)),{labelProps:c,inputProps:v,isSelected:$,isDisabled:u,isReadOnly:b,isPressed:m,isInvalid:h}=i?oe({...E(e),value:e.value,children:typeof e.children=="function"?!0:e.children},i,t):L({...E(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:f},T(e),t),{isFocused:x,isFocusVisible:I,focusProps:V}=z(),D=u||b,{hoverProps:y,isHovered:O}=J({...e,isDisabled:D}),C=k({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:$,isIndeterminate:e.isIndeterminate||!1,isPressed:m,isHovered:O,isFocused:x,isFocusVisible:I,isDisabled:u,isReadOnly:b,isInvalid:h,isRequired:e.isRequired||!1}}),q=p(e);return delete q.id,g.createElement("label",{...R(q,c,y,C),ref:d,slot:e.slot||void 0,"data-selected":$||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":m||void 0,"data-hovered":O||void 0,"data-focused":x||void 0,"data-focus-visible":I||void 0,"data-disabled":u||void 0,"data-readonly":b||void 0,"data-invalid":h||void 0,"data-required":e.isRequired||void 0},g.createElement(ne,{elementType:"span"},g.createElement("input",{...R(v,V),ref:t})),C.children)});export{Ve as $,Ie as a,fe as b};
