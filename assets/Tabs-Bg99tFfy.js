import{a as W,b as B,c as U,d as j,e as q,f as G,$ as J,g as H,h as Q,i as X,j as Y}from"./Collection-HyIYbscu.js";import{f as F,b as Z,d as L,e as w,n as A,k as _,$ as R,c as ee,a as te}from"./useFocusRing-CELWytXw.js";import{$ as M,b as le}from"./useFocusWithin-Dp0pJUJ1.js";import{r as u,R as v}from"./index-DH5ua8nC.js";import{$ as ie}from"./useControlledState-BSXamw7l.js";import{$ as O}from"./useLabels-cU4IwlF2.js";import{$ as ae}from"./context-CIGhUvog.js";import{a as se}from"./usePress-DAUyqWol.js";import{$ as ne}from"./FocusScope-DBUbNCbs.js";import{$ as de}from"./chain-Crd5RmWG.js";function oe(i,e){let t=e==null?void 0:e.isDisabled,[l,a]=u.useState(!1);return de(()=>{if(i!=null&&i.current&&!t){let d=()=>{if(i.current){let n=ne(i.current,{tabbable:!0});a(!!n.nextNode())}};d();let s=new MutationObserver(d);return s.observe(i.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{s.disconnect()}}}),t?!1:l}const z=new WeakMap;function S(i,e,t){return i?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${z.get(i)}-${t}-${e}`):""}function re(i,e,t){let{key:l,isDisabled:a,shouldSelectOnPressUp:d}=i,{selectionManager:s,selectedKey:n}=e,o=l===n,r=a||e.isDisabled||e.selectionManager.isDisabled(l),{itemProps:c,isPressed:f}=W({selectionManager:s,key:l,ref:t,isDisabled:r,shouldSelectOnPressUp:d,linkBehavior:"selection"}),y=S(e,l,"tab"),g=S(e,l,"tabpanel"),{tabIndex:x}=c,$=e.collection.getItem(l),P=F($==null?void 0:$.props,{labelable:!0});delete P.id;let b=se($==null?void 0:$.props);return{tabProps:M(P,b,c,{id:y,"aria-selected":o,"aria-disabled":r||void 0,"aria-controls":o?g:void 0,tabIndex:r?void 0:x,role:"tab"}),isSelected:o,isDisabled:r,isPressed:f}}function ce(i,e,t){let l=oe(t)?void 0:0;var a;const d=S(e,(a=i.id)!==null&&a!==void 0?a:e==null?void 0:e.selectedKey,"tabpanel"),s=O({...i,id:d,"aria-labelledby":S(e,e==null?void 0:e.selectedKey,"tab")});return{tabPanelProps:M(s,{tabIndex:l,role:"tabpanel","aria-describedby":i["aria-describedby"],"aria-details":i["aria-details"]})}}class ue{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,l;return this.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){do e=this.collection.getKeyAfter(e),e==null&&(e=this.collection.getFirstKey());while(this.isDisabled(e));return e}getPreviousKey(e){do e=this.collection.getKeyBefore(e),e==null&&(e=this.collection.getLastKey());while(this.isDisabled(e));return e}constructor(e,t,l,a=new Set){this.collection=e,this.flipDirection=t==="rtl"&&l==="horizontal",this.disabledKeys=a,this.tabDirection=l==="horizontal"}}function fe(i,e,t){let{orientation:l="horizontal",keyboardActivation:a="automatic"}=i,{collection:d,selectionManager:s,disabledKeys:n}=e,{direction:o}=ae(),r=u.useMemo(()=>new ue(d,o,l,n),[d,n,l,o]),{collectionProps:c}=B({ref:t,selectionManager:s,keyboardDelegate:r,selectOnFocus:a==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),f=le();z.set(e,f);let y=O({...i,id:f});return{tabListProps:{...M(c,y),role:"tablist","aria-orientation":l,tabIndex:void 0}}}class V{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);var l;return t&&(l=t.prevKey)!==null&&l!==void 0?l:null}getKeyAfter(e){let t=this.keyMap.get(e);var l;return t&&(l=t.nextKey)!==null&&l!==void 0?l:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){let t=this.keyMap.get(e);return(t==null?void 0:t.childNodes)||[]}constructor(e){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e;let t=s=>{if(this.keyMap.set(s.key,s),s.childNodes&&s.type==="section")for(let n of s.childNodes)t(n)};for(let s of e)t(s);let l=null,a=0;for(let[s,n]of this.keyMap)l?(l.nextKey=s,n.prevKey=l.key):(this.firstKey=s,n.prevKey=void 0),n.type==="item"&&(n.index=a++),l=n,l.nextKey=void 0;var d;this.lastKey=(d=l==null?void 0:l.key)!==null&&d!==void 0?d:null}}function be(i){let{filter:e,layoutDelegate:t}=i,l=U(i),a=u.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),d=u.useCallback(c=>e?new V(e(c)):new V(c),[e]),s=u.useMemo(()=>({suppressTextValueWarning:i.suppressTextValueWarning}),[i.suppressTextValueWarning]),n=j(i,d,s),o=u.useMemo(()=>new q(n,l,{layoutDelegate:t}),[n,l,t]);const r=u.useRef(null);return u.useEffect(()=>{if(l.focusedKey!=null&&!n.getItem(l.focusedKey)&&r.current){const b=r.current.getItem(l.focusedKey),C=[...r.current.getKeys()].map(m=>{const K=r.current.getItem(m);return(K==null?void 0:K.type)==="item"?K:null}).filter(m=>m!==null),h=[...n.getKeys()].map(m=>{const K=n.getItem(m);return(K==null?void 0:K.type)==="item"?K:null}).filter(m=>m!==null);var c,f;const T=((c=C==null?void 0:C.length)!==null&&c!==void 0?c:0)-((f=h==null?void 0:h.length)!==null&&f!==void 0?f:0);var y,g,x;let p=Math.min(T>1?Math.max(((y=b==null?void 0:b.index)!==null&&y!==void 0?y:0)-T+1,0):(g=b==null?void 0:b.index)!==null&&g!==void 0?g:0,((x=h==null?void 0:h.length)!==null&&x!==void 0?x:0)-1),E=null,I=!1;for(;p>=0;){if(!o.isDisabled(h[p].key)){E=h[p];break}if(p<h.length-1&&!I)p++;else{I=!0;var $,P;p>(($=b==null?void 0:b.index)!==null&&$!==void 0?$:0)&&(p=(P=b==null?void 0:b.index)!==null&&P!==void 0?P:0),p--}}l.setFocusedKey(E?E.key:null)}r.current=n},[n,o,l,l.focusedKey]),{collection:n,disabledKeys:a,selectionManager:o}}function $e(i){var e;let[t,l]=ie(i.selectedKey,(e=i.defaultSelectedKey)!==null&&e!==void 0?e:null,i.onSelectionChange),a=u.useMemo(()=>t!=null?[t]:[],[t]),{collection:d,disabledKeys:s,selectionManager:n}=be({...i,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:a,onSelectionChange:r=>{if(r==="all")return;var c;let f=(c=r.values().next().value)!==null&&c!==void 0?c:null;f===t&&i.onSelectionChange&&i.onSelectionChange(f),l(f)}}),o=t!=null?d.getItem(t):null;return{collection:d,disabledKeys:s,selectionManager:n,selectedKey:t,setSelectedKey:l,selectedItem:o}}function ve(i){var e,t;let l=$e({...i,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=i.defaultSelectedKey)!==null&&e!==void 0?e:N(i.collection,i.disabledKeys?new Set(i.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:a,collection:d,selectedKey:s}=l,n=u.useRef(s);return u.useEffect(()=>{let o=s;(a.isEmpty||o==null||!d.getItem(o))&&(o=N(d,l.disabledKeys),o!=null&&a.setSelectedKeys([o])),(o!=null&&a.focusedKey==null||!a.isFocused&&o!==n.current)&&a.setFocusedKey(o),n.current=o}),{...l,isDisabled:i.isDisabled||!1}}function N(i,e){let t=null;if(i){var l,a,d,s;for(t=i.getFirstKey();t!=null&&(e.has(t)||!((a=i.getItem(t))===null||a===void 0||(l=a.props)===null||l===void 0)&&l.isDisabled)&&t!==i.getLastKey();)t=i.getKeyAfter(t);t!=null&&(e.has(t)||!((s=i.getItem(t))===null||s===void 0||(d=s.props)===null||d===void 0)&&d.isDisabled)&&t===i.getLastKey()&&(t=i.getFirstKey())}return t}const k=u.createContext(null),D=u.createContext(null),we=u.forwardRef(function(e,t){[e,t]=Z(e,t,k);let{children:l,orientation:a="horizontal"}=e;return l=u.useMemo(()=>typeof l=="function"?l({orientation:a,defaultChildren:null}):l,[l,a]),v.createElement(G,{content:l},d=>v.createElement(ye,{props:e,collection:d,tabsRef:t}))});function ye({props:i,tabsRef:e,collection:t}){let{orientation:l="horizontal"}=i,a=ve({...i,collection:t,children:void 0}),{focusProps:d,isFocused:s,isFocusVisible:n}=L({within:!0}),o=u.useMemo(()=>({orientation:l,isFocusWithin:s,isFocusVisible:n}),[l,s,n]),r=w({...i,defaultClassName:"react-aria-Tabs",values:o});return v.createElement("div",{...F(i),...d,...r,ref:e,slot:i.slot||void 0,"data-focused":s||void 0,"data-orientation":l,"data-focus-visible":n||void 0,"data-disabled":a.isDisabled||void 0},v.createElement(A,{values:[[k,i],[D,a]]},r.children))}const ke=u.forwardRef(function(e,t){return u.useContext(D)?v.createElement(he,{props:e,forwardedRef:t}):v.createElement(J,e)});function he({props:i,forwardedRef:e}){let t=u.useContext(D),{CollectionRoot:l}=u.useContext(H),{orientation:a="horizontal",keyboardActivation:d="automatic"}=_(k),s=R(e),{tabListProps:n}=fe({...i,orientation:a,keyboardActivation:d},t,s),o=w({...i,children:null,defaultClassName:"react-aria-TabList",values:{orientation:a,state:t}}),r=F(i);return delete r.id,v.createElement("div",{...r,...n,ref:s,...o,"data-orientation":a||void 0},v.createElement(l,{collection:t.collection,persistedKeys:Q(t.selectionManager.focusedKey)}))}const Ce=X("item",(i,e,t)=>{let l=u.useContext(D),a=R(e),{tabProps:d,isSelected:s,isDisabled:n,isPressed:o}=re({key:t.key,...i},l,a),{focusProps:r,isFocused:c,isFocusVisible:f}=L(),{hoverProps:y,isHovered:g}=ee({isDisabled:n,onHoverStart:i.onHoverStart,onHoverEnd:i.onHoverEnd,onHoverChange:i.onHoverChange}),x=w({...i,id:void 0,defaultClassName:"react-aria-Tab",values:{isSelected:s,isDisabled:n,isFocused:c,isFocusVisible:f,isPressed:o,isHovered:g}}),$=t.props.href?"a":"div";return v.createElement($,{...M(d,r,y,x),ref:a,"data-selected":s||void 0,"data-disabled":n||void 0,"data-focused":c||void 0,"data-focus-visible":f||void 0,"data-pressed":o||void 0,"data-hovered":g||void 0})}),Ee=te(function(e,t){const l=u.useContext(D);let a=R(t),{tabPanelProps:d}=ce(e,l,a),{focusProps:s,isFocused:n,isFocusVisible:o}=L(),r=l.selectedKey===e.id,c=w({...e,defaultClassName:"react-aria-TabPanel",values:{isFocused:n,isFocusVisible:o,isInert:!r,state:l}});if(!r&&!e.shouldForceMount)return null;let f=F(e);delete f.id;let y=r?M(f,d,s,c):c;return v.createElement("div",{...y,ref:a,"data-focused":n||void 0,"data-focus-visible":o||void 0,inert:r?void 0:"true","data-inert":r?void 0:"true"},v.createElement(A,{values:[[k,null],[D,null]]},v.createElement(H.Provider,{value:Y},c.children)))});export{ke as $,Ce as a,Ee as b,we as c,D as d};
