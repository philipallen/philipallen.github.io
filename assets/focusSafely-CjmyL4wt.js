import{r as f}from"./index-DH5ua8nC.js";import{$ as F}from"./chain-Crd5RmWG.js";import{f as O}from"./useFocusWithin-D15f1-3B.js";import{$ as M,c as D}from"./platform-Dbfj6p2q.js";const v=e=>{var r;return(r=e==null?void 0:e.ownerDocument)!==null&&r!==void 0?r:document},s=e=>e&&"window"in e&&e.window===e?e:v(e).defaultView||window,I=new Set(["id"]),N=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),K=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),_=/^(data-.*)$/;function te(e,r={}){let{labelable:t,isLink:n,propNames:o}=r,i={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(I.has(a)||t&&N.has(a)||n&&K.has(a)||o!=null&&o.has(a)||_.test(a))&&(i[a]=e[a]);return i}function k(e){if(B())e.focus({preventScroll:!0});else{let r=G(e);e.focus(),j(r)}}let E=null;function B(){if(E==null){E=!1;try{document.createElement("div").focus({get preventScroll(){return E=!0,!0}})}catch{}}return E}function G(e){let r=e.parentNode,t=[],n=document.scrollingElement||document.documentElement;for(;r instanceof HTMLElement&&r!==n;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),r=r.parentNode;return n instanceof HTMLElement&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),t}function j(e){for(let{element:r,scrollTop:t,scrollLeft:n}of e)r.scrollTop=t,r.scrollLeft=n}let $=new Map,y=new Set;function x(){if(typeof window>"u")return;function e(n){return"propertyName"in n}let r=n=>{if(!e(n)||!n.target)return;let o=$.get(n.target);o||(o=new Set,$.set(n.target,o),n.target.addEventListener("transitioncancel",t,{once:!0})),o.add(n.propertyName)},t=n=>{if(!e(n)||!n.target)return;let o=$.get(n.target);if(o&&(o.delete(n.propertyName),o.size===0&&(n.target.removeEventListener("transitioncancel",t),$.delete(n.target)),$.size===0)){for(let i of y)i();y.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?x():document.addEventListener("DOMContentLoaded",x));function A(e){requestAnimationFrame(()=>{$.size===0?e():y.add(e)})}function ne(){let e=f.useRef(new Map),r=f.useCallback((o,i,a,l)=>{let d=l!=null&&l.once?(...p)=>{e.current.delete(a),a(...p)}:a;e.current.set(a,{type:i,eventTarget:o,fn:d,options:l}),o.addEventListener(i,d,l)},[]),t=f.useCallback((o,i,a,l)=>{var d;let p=((d=e.current.get(a))===null||d===void 0?void 0:d.fn)||a;o.removeEventListener(i,p,l),e.current.delete(a)},[]),n=f.useCallback(()=>{e.current.forEach((o,i)=>{t(o.eventTarget,o.type,i,o.options)})},[t]);return f.useEffect(()=>n,[n]),{addGlobalListener:r,removeGlobalListener:t,removeAllGlobalListeners:n}}function re(e,r){F(()=>{if(e&&e.ref&&r)return e.ref.current=r.current,()=>{e.ref&&(e.ref.current=null)}})}function W(e){return e.mozInputSource===0&&e.isTrusted?!0:M()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function oe(e){return!M()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function ae(e){let{isDisabled:r,onFocus:t,onBlur:n,onFocusChange:o}=e;const i=f.useCallback(d=>{if(d.target===d.currentTarget)return n&&n(d),o&&o(!1),!0},[n,o]),a=O(i),l=f.useCallback(d=>{const p=v(d.target);d.target===d.currentTarget&&p.activeElement===d.target&&(t&&t(d),o&&o(!0),a(d))},[o,t,a]);return{focusProps:{onFocus:!r&&(t||o||n)?l:void 0,onBlur:!r&&(n||o)?i:void 0}}}let b=null,w=new Set,m=new Map,u=!1,h=!1;const z={Tab:!0,Escape:!0};function g(e,r){for(let t of w)t(e,r)}function R(e){return!(e.metaKey||!D()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function L(e){u=!0,R(e)&&(b="keyboard",g("keyboard",e))}function c(e){b="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(u=!0,g("pointer",e))}function S(e){W(e)&&(u=!0,b="virtual")}function C(e){e.target===window||e.target===document||(!u&&!h&&(b="virtual",g("virtual",e)),u=!1,h=!1)}function H(){u=!1,h=!0}function T(e){if(typeof window>"u"||m.get(s(e)))return;const r=s(e),t=v(e);let n=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){u=!0,n.apply(this,arguments)},t.addEventListener("keydown",L,!0),t.addEventListener("keyup",L,!0),t.addEventListener("click",S,!0),r.addEventListener("focus",C,!0),r.addEventListener("blur",H,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",c,!0),t.addEventListener("pointermove",c,!0),t.addEventListener("pointerup",c,!0)):(t.addEventListener("mousedown",c,!0),t.addEventListener("mousemove",c,!0),t.addEventListener("mouseup",c,!0)),r.addEventListener("beforeunload",()=>{P(e)},{once:!0}),m.set(r,{focus:n})}const P=(e,r)=>{const t=s(e),n=v(e);r&&n.removeEventListener("DOMContentLoaded",r),m.has(t)&&(t.HTMLElement.prototype.focus=m.get(t).focus,n.removeEventListener("keydown",L,!0),n.removeEventListener("keyup",L,!0),n.removeEventListener("click",S,!0),t.removeEventListener("focus",C,!0),t.removeEventListener("blur",H,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",c,!0),n.removeEventListener("pointermove",c,!0),n.removeEventListener("pointerup",c,!0)):(n.removeEventListener("mousedown",c,!0),n.removeEventListener("mousemove",c,!0),n.removeEventListener("mouseup",c,!0)),m.delete(t))};function V(e){const r=v(e);let t;return r.readyState!=="loading"?T(e):(t=()=>{T(e)},r.addEventListener("DOMContentLoaded",t)),()=>P(e,t)}typeof document<"u"&&V();function U(){return b!=="pointer"}function q(){return b}function ie(e){b=e,g(e,null)}const Y=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function J(e,r,t){var n;const o=typeof window<"u"?s(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?s(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?s(t==null?void 0:t.target).HTMLElement:HTMLElement,l=typeof window<"u"?s(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!Y.has(t==null||(n=t.target)===null||n===void 0?void 0:n.type)||(t==null?void 0:t.target)instanceof i||(t==null?void 0:t.target)instanceof a&&(t==null?void 0:t.target.isContentEditable),!(e&&r==="keyboard"&&t instanceof l&&!z[t.key])}function de(e,r,t){T(),f.useEffect(()=>{let n=(o,i)=>{J(!!(t!=null&&t.isTextInput),o,i)&&e(U())};return w.add(n),()=>{w.delete(n)}},r)}function ce(e){const r=v(e);if(q()==="virtual"){let t=r.activeElement;A(()=>{r.activeElement===t&&e.isConnected&&k(e)})}else k(e)}export{te as $,s as a,ae as b,ce as c,re as d,v as e,q as f,ie as g,A as h,U as i,de as j,k,ne as l,oe as m,W as n};
