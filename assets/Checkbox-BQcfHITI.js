import{$ as j}from"./RSPContexts-v-WQ8S-5.js";import{d as V,b as q,i as p,$ as G,g as N,h as O,c as S,f as z,j as A}from"./utils-BPOuYIA2.js";import{$ as y,b as J,e as M,a as K,f as L,g as Q,c as C,d as U}from"./Form-lKvwNwi4.js";import{a as X}from"./Label-CxUBTwi1.js";import{a as Y}from"./Text-DC2Lycci.js";import{$ as E}from"./filterDOMProps-CeZl_uWj.js";import{r as m,e as x}from"./index-CcKhGcwW.js";import{$ as Z}from"./usePress-N-SZRQyW.js";import{$ as ee}from"./useToggle-Cjg9gqo4.js";import{$ as _}from"./useToggleState-eLSQACY8.js";import{b as ae,a as ie,$ as de}from"./useFocusRing-G-z0GAlQ.js";import{$ as le}from"./VisuallyHidden-BNZM_wZC.js";import{$ as te}from"./useControlledState-Bw1hdnkP.js";function F(a,e,l){let o=y({...a,value:e.isSelected}),{isInvalid:c,validationErrors:r,validationDetails:s}=o.displayValidation,{labelProps:d,inputProps:f,isSelected:i,isPressed:t,isDisabled:n,isReadOnly:v}=ee({...a,isInvalid:c},e,l);J(a,o,l);let{isIndeterminate:$,isRequired:u,validationBehavior:b="aria"}=a;m.useEffect(()=>{l.current&&(l.current.indeterminate=!!$)});let{pressProps:h}=Z({isDisabled:n||v,onPress(){let{[M]:P}=a,{commitValidation:R}=P||o;R()}});return{labelProps:V(d,h),inputProps:{...f,checked:i,"aria-required":u&&b==="aria"||void 0,required:u&&b==="native"},isSelected:i,isPressed:t,isDisabled:n,isReadOnly:v,isInvalid:c,validationErrors:r,validationDetails:s}}const k=new WeakMap;function ne(a,e){let{isDisabled:l,name:o,validationBehavior:c="aria"}=a,{isInvalid:r,validationErrors:s,validationDetails:d}=e.displayValidation,{labelProps:f,fieldProps:i,descriptionProps:t,errorMessageProps:n}=K({...a,labelElementType:"span",isInvalid:r,errorMessage:a.errorMessage||s});k.set(e,{name:o,descriptionId:t.id,errorMessageId:n.id,validationBehavior:c});let v=E(a,{labelable:!0}),{focusWithinProps:$}=ae({onBlurWithin:a.onBlur,onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange});return{groupProps:V(v,{role:"group","aria-disabled":l||void 0,...i,...$}),labelProps:f,descriptionProps:t,errorMessageProps:n,isInvalid:r,validationErrors:s,validationDetails:d}}function re(a,e,l){const o=_({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),onChange(h){h?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(h)}});let{name:c,descriptionId:r,errorMessageId:s,validationBehavior:d}=k.get(e);var f;d=(f=a.validationBehavior)!==null&&f!==void 0?f:d;let{realtimeValidation:i}=y({...a,value:o.isSelected,name:void 0,validationBehavior:"aria"}),t=m.useRef(L),n=()=>{e.setInvalid(a.value,i.isInvalid?i:t.current)};m.useEffect(n);let v=e.realtimeValidation.isInvalid?e.realtimeValidation:i,$=d==="native"?e.displayValidation:v;var u;let b=F({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||c,isRequired:(u=a.isRequired)!==null&&u!==void 0?u:e.isRequired,validationBehavior:d,[M]:{realtimeValidation:v,displayValidation:$,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(h){t.current=h,n()}}},o,l);return{...b,inputProps:{...b.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?s:null,r].filter(Boolean).join(" ")||void 0}}}function se(a={}){let[e,l]=te(a.value,a.defaultValue||[],a.onChange),o=!!a.isRequired&&e.length===0,c=m.useRef(new Map),r=y({...a,value:e}),s=r.displayValidation.isInvalid;var d;return{...r,value:e,setValue(i){a.isReadOnly||a.isDisabled||l(i)},isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isSelected(i){return e.includes(i)},addValue(i){a.isReadOnly||a.isDisabled||e.includes(i)||l(e.concat(i))},removeValue(i){a.isReadOnly||a.isDisabled||e.includes(i)&&l(e.filter(t=>t!==i))},toggleValue(i){a.isReadOnly||a.isDisabled||(e.includes(i)?l(e.filter(t=>t!==i)):l(e.concat(i)))},setInvalid(i,t){let n=new Map(c.current);t.isInvalid?n.set(i,t):n.delete(i),c.current=n,r.updateValidation(Q(...n.values()))},validationState:(d=a.validationState)!==null&&d!==void 0?d:s?"invalid":null,isInvalid:s,isRequired:o}}const oe=m.createContext(null),W=m.createContext(null),Ie=m.forwardRef(function(e,l){[e,l]=q(e,l,oe);let{validationBehavior:o}=p(C)||{};var c,r;let s=(r=(c=e.validationBehavior)!==null&&c!==void 0?c:o)!==null&&r!==void 0?r:"native",d=se({...e,validationBehavior:s}),[f,i]=z(!e["aria-label"]&&!e["aria-labelledby"]),{groupProps:t,labelProps:n,descriptionProps:v,errorMessageProps:$,...u}=ne({...e,label:i,validationBehavior:s},d),b=S({...e,values:{isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:e.isRequired||!1,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-CheckboxGroup"});return x.createElement("div",{...t,...b,ref:l,slot:e.slot||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":d.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},x.createElement(A,{values:[[W,d],[X,{...n,ref:f,elementType:"span"}],[Y,{slots:{description:v,errorMessage:$}}],[U,u]]},b.children))}),ge=m.forwardRef(function(e,l){let{inputRef:o=null,...c}=e;[e,l]=q(c,l,j);let{validationBehavior:r}=p(C)||{};var s,d;let f=(d=(s=e.validationBehavior)!==null&&s!==void 0?s:r)!==null&&d!==void 0?d:"native",i=m.useContext(W),t=G(m.useMemo(()=>N(o,e.inputRef!==void 0?e.inputRef:null),[o,e.inputRef])),{labelProps:n,inputProps:v,isSelected:$,isDisabled:u,isReadOnly:b,isPressed:h,isInvalid:P}=i?re({...O(e),value:e.value,children:typeof e.children=="function"?!0:e.children},i,t):F({...O(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:f},_(e),t),{isFocused:R,isFocusVisible:I,focusProps:w}=ie(),H=u||b,{hoverProps:T,isHovered:g}=de({...e,isDisabled:H}),D=S({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:$,isIndeterminate:e.isIndeterminate||!1,isPressed:h,isHovered:g,isFocused:R,isFocusVisible:I,isDisabled:u,isReadOnly:b,isInvalid:P,isRequired:e.isRequired||!1}}),B=E(e);return delete B.id,x.createElement("label",{...V(B,n,T,D),ref:l,slot:e.slot||void 0,"data-selected":$||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":h||void 0,"data-hovered":g||void 0,"data-focused":R||void 0,"data-focus-visible":I||void 0,"data-disabled":u||void 0,"data-readonly":b||void 0,"data-invalid":P||void 0,"data-required":e.isRequired||void 0},x.createElement(le,{elementType:"span"},x.createElement("input",{...V(v,w),ref:t})),D.children)});export{ge as $,oe as a,Ie as b};
