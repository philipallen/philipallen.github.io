import{j as t}from"./jsx-runtime-sfY7k0Xq.js";import{r as s}from"./index-CcKhGcwW.js";import{$ as g}from"./Input-ByoGzd43.js";import{$ as T}from"./TextField-C-53a1GP.js";import{$ as V}from"./useControlledState-Bw1hdnkP.js";import{e as v}from"./index-CoGc3U6X.js";import{C as R,S as B,I as E}from"./TextInputV2.styled-DMNKOOhn.js";import{R as L}from"./ReactAriaProviders-CFG_2kIo.js";import{I as O,a as _}from"./InputAlerts-CqET0I5r.js";import{I as k}from"./InputLabelTopV2-C0uvm5sO.js";import{O as w}from"./OuterFieldV2-CwcTePN9.js";import{C as A}from"./CharactersCounter-ENOmy08R.js";import{I as P}from"./IconButtonV2-BTjtV1ch.js";import{C as W}from"./index-CA_uD5kO.js";import{$ as h,a as N}from"./utils-BPOuYIA2.js";const F=s.forwardRef((r,m)=>{const{labelProps:c,alerts:n,id:i,placeholder:d,startSlot:b,endSlot:I,withCharacterCounter:f,onChange:e,testID:l="text-input",...u}=r,{maxLength:a}=u,x=h(m),p=s.useId(),o=s.useId(),$=[r["aria-describedby"],b?o:void 0].filter(Boolean).join(" ")||void 0,[C,j]=V(r.value,r.defaultValue??""),S=N(j,e);return t.jsx(L,{fieldID:i||p,externallyLabelledBy:r["aria-labelledby"],externallyDescribedBy:$,labelProps:c,alerts:n,children:({labelledBy:D,describedBy:y})=>t.jsx(O,{alert:n&&t.jsx(_,{alerts:n}),gap:f&&a!==void 0?"4px":"8px",children:t.jsxs(R,{children:[t.jsx(k,{...c,children:t.jsx(T,{...u,id:i||p,"aria-labelledby":D,"aria-describedby":y,onChange:S,"data-testid":l,children:t.jsx(H,{...r,ref:x,testID:l})})}),f&&a!==void 0&&t.jsx(A,{length:C.length,maxLength:a,testID:`${l}-character-counter`})]})})})}),H=s.forwardRef((r,m)=>{const{placeholder:c,startSlot:n,endSlot:i,buttonSlot:d,testID:b,isDisabled:I,isReadOnly:f}=r,e=s.useContext(g),l=h(m),u=s.useId(),a=()=>{var o;return(o=l.current)==null?void 0:o.focus()},x=s.useCallback(()=>{var o;(o=e==null?void 0:e.onChange)==null||o.call(e,{target:{value:""}}),a()},[e,a]),p=()=>{if(d){if(d!==v.WITH_CLEAR_BUTTON)return d;if(e.value)return t.jsx(P,{"aria-label":"Clear text",onClick:x,testID:`${b}-clear-button`,children:t.jsx(W,{})})}};return t.jsx(w,{startSlot:n&&t.jsx(B,{id:u,$isDisabled:I,children:n}),buttonSlot:p(),endSlot:i,focusElement:a,isReadOnly:f,children:t.jsx(E,{ref:l,placeholder:c})})});F.displayName="TextInputV2";export{F as T};
