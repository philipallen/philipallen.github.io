import{d as x,b as D,c as F,l as L}from"./utils-BPOuYIA2.js";import{a as I}from"./ProgressBar-OTHehGJ9.js";import{b as w}from"./Label-CxUBTwi1.js";import{$ as A}from"./filterDOMProps-CeZl_uWj.js";import{r as y,e as E}from"./index-CcKhGcwW.js";import{$ as N}from"./usePress-N-SZRQyW.js";import{c as O,a as S,$ as V}from"./useFocusRing-G-z0GAlQ.js";function M(t,e){let{elementType:i="button",isDisabled:d,onPress:n,onPressStart:a,onPressEnd:r,onPressUp:p,onPressChange:l,preventFocusOnPress:b,allowFocusWhenDisabled:m,onClick:$,href:h,target:P,rel:u,type:c="button"}=t,o;i==="button"?o={type:c,disabled:d}:o={role:"button",href:i==="a"&&!d?h:void 0,target:i==="a"?P:void 0,type:i==="input"?c:void 0,disabled:i==="input"?d:void 0,"aria-disabled":!d||i==="input"?void 0:d,rel:i==="a"?u:void 0};let{pressProps:f,isPressed:v}=N({onPressStart:a,onPressEnd:r,onPressChange:l,onPress:n,onPressUp:p,onClick:$,isDisabled:d,preventFocusOnPress:b,ref:e}),{focusableProps:g}=O(t,e);m&&(g.tabIndex=d?-1:g.tabIndex);let _=x(g,f,A(t,{labelable:!0}));return{isPressed:v,buttonProps:x(o,_,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"]})}}const T=7e3;let s=null;function C(t,e="assertive",i=T){s?s.announce(t,e,i):(s=new H,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?s.announce(t,e,i):setTimeout(()=>{s!=null&&s.isAttached()&&(s==null||s.announce(t,e,i))},100))}function z(t){s&&s.clear(t)}class H{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let i=document.createElement("div");return i.setAttribute("role","log"),i.setAttribute("aria-live",e),i.setAttribute("aria-relevant","additions"),i}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,i="assertive",d=T){var n,a;if(!this.node)return;let r=document.createElement("div");typeof e=="object"?(r.setAttribute("role","img"),r.setAttribute("aria-labelledby",e["aria-labelledby"])):r.textContent=e,i==="assertive"?(n=this.assertiveLog)===null||n===void 0||n.appendChild(r):(a=this.politeLog)===null||a===void 0||a.appendChild(r),e!==""&&setTimeout(()=>{r.remove()},d)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const R=new Set(["form","formAction","formEncType","formMethod","formNoValidate","formTarget","name","value"]),U=y.createContext({}),J=w(function(e,i){[e,i]=D(e,i,U),e=k(e);let d=e,{isPending:n}=d,{buttonProps:a,isPressed:r}=M(e,i),{focusProps:p,isFocused:l,isFocusVisible:b}=S(e),{hoverProps:m,isHovered:$}=V({...e,isDisabled:e.isDisabled||n}),h={isHovered:$,isPressed:(d.isPressed||r)&&!n,isFocused:l,isFocusVisible:b,isDisabled:e.isDisabled||!1,isPending:n??!1},P=F({...e,values:h,defaultClassName:"react-aria-Button"}),u=L(a.id),c=L(),o=a["aria-labelledby"];n&&(o?o=`${o} ${c}`:a["aria-label"]&&(o=`${u} ${c}`));let f=y.useRef(n);return y.useEffect(()=>{let v={"aria-labelledby":o||u};(!f.current&&l&&n||f.current&&l&&!n)&&C(v,"assertive"),f.current=n},[n,l,o,u]),E.createElement("button",{...A(e,{propNames:R}),...x(a,p,m),...P,type:a.type==="submit"&&n?"button":a.type,id:u,ref:i,"aria-labelledby":o,slot:e.slot||void 0,"aria-disabled":n?"true":a["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":h.isPressed||void 0,"data-hovered":$||void 0,"data-focused":l||void 0,"data-pending":n||void 0,"data-focus-visible":b||void 0},E.createElement(I.Provider,{value:{id:c}},P.children))});function k(t){return t.isPending&&(t.onPress=void 0,t.onPressStart=void 0,t.onPressEnd=void 0,t.onPressChange=void 0,t.onPressUp=void 0,t.onKeyDown=void 0,t.onKeyUp=void 0,t.onClick=void 0,t.href=void 0),t}export{J as $,U as a,M as b,z as c,C as d};
