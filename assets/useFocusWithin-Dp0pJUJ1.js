import{$ as d,a as m}from"./chain-Crd5RmWG.js";import{r as o,R as l}from"./index-DH5ua8nC.js";function p(u){const e=o.useRef(null);return d(()=>{e.current=u},[u]),o.useCallback((...n)=>{const t=e.current;return t==null?void 0:t(...n)},[])}function x(u){let[e,n]=o.useState(u),t=o.useRef(null),r=p(()=>{if(!t.current)return;let a=t.current.next();if(a.done){t.current=null;return}e===a.value?r():n(a.value)});d(()=>{t.current&&r()});let s=p(a=>{t.current=a(e),r()});return[e,s]}const $={prefix:String(Math.round(Math.random()*1e10)),current:0},v=l.createContext($),S=l.createContext(!1);let y=!!(typeof window<"u"&&window.document&&window.document.createElement),b=new WeakMap;function w(u=!1){let e=o.useContext(v),n=o.useRef(null);if(n.current===null&&!u){var t,r;let s=(r=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(t=r.ReactCurrentOwner)===null||t===void 0?void 0:t.current;if(s){let a=b.get(s);a==null?b.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==a.state&&(e.current=a.id,b.delete(s))}n.current=++e.current}return n.current}function F(u){let e=o.useContext(v);e===$&&!y&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=w(!!u),t=`react-aria${e.prefix}`;return u||`${t}-${n}`}function C(u){let e=l.useId(),[n]=o.useState(T()),t=n?"react-aria":`react-aria${$.prefix}`;return u||`${t}-${e}`}const P=typeof l.useId=="function"?C:F;function M(){return!1}function W(){return!0}function k(u){return()=>{}}function T(){return typeof l.useSyncExternalStore=="function"?l.useSyncExternalStore(k,M,W):o.useContext(S)}let H=!!(typeof window<"u"&&window.document&&window.document.createElement),c=new Map;function I(u){let[e,n]=o.useState(u),t=o.useRef(null),r=P(e),s=o.useCallback(a=>{t.current=a},[]);return H&&(c.has(r)&&!c.get(r).includes(s)?c.set(r,[...c.get(r),s]):c.set(r,[s])),d(()=>{let a=r;return()=>{c.delete(a)}},[r]),o.useEffect(()=>{let a=t.current;a&&(t.current=null,n(a))}),r}function V(u,e){if(u===e)return u;let n=c.get(u);if(n)return n.forEach(r=>r(e)),e;let t=c.get(e);return t?(t.forEach(r=>r(u)),u):e}function A(u=[]){let e=I(),[n,t]=x(e),r=o.useCallback(()=>{t(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,t]);return d(r,[e,r,...u]),n}function h(u){var e,n,t="";if(typeof u=="string"||typeof u=="number")t+=u;else if(typeof u=="object")if(Array.isArray(u)){var r=u.length;for(e=0;e<r;e++)u[e]&&(n=h(u[e]))&&(t&&(t+=" "),t+=n)}else for(n in u)u[n]&&(t&&(t+=" "),t+=n);return t}function B(){for(var u,e,n=0,t="",r=arguments.length;n<r;n++)(u=arguments[n])&&(e=h(u))&&(t&&(t+=" "),t+=e);return t}function E(...u){let e={...u[0]};for(let n=1;n<u.length;n++){let t=u[n];for(let r in t){let s=e[r],a=t[r];typeof s=="function"&&typeof a=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=m(s,a):(r==="className"||r==="UNSAFE_className")&&typeof s=="string"&&typeof a=="string"?e[r]=B(s,a):r==="id"&&s&&a?e.id=V(s,a):e[r]=a!==void 0?a:s}}return e}class z{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function j(u){let e=o.useRef({isFocused:!1,observer:null});d(()=>{const t=e.current;return()=>{t.observer&&(t.observer.disconnect(),t.observer=null)}},[]);let n=p(t=>{u==null||u(t)});return o.useCallback(t=>{if(t.target instanceof HTMLButtonElement||t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement){e.current.isFocused=!0;let r=t.target,s=a=>{e.current.isFocused=!1,r.disabled&&n(new z("blur",a)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};r.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&r.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let f=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:f})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:f}))}}),e.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function G(u){let{isDisabled:e,onBlurWithin:n,onFocusWithin:t,onFocusWithinChange:r}=u,s=o.useRef({isFocusWithin:!1}),a=o.useCallback(i=>{s.current.isFocusWithin&&!i.currentTarget.contains(i.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(i),r&&r(!1))},[n,r,s]),f=j(a),g=o.useCallback(i=>{!s.current.isFocusWithin&&document.activeElement===i.target&&(t&&t(i),r&&r(!0),s.current.isFocusWithin=!0,f(i))},[t,r,f]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:g,onBlur:a}}}export{E as $,G as a,I as b,p as c,T as d,A as e,j as f};
