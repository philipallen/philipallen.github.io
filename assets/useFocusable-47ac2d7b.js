import{r as f,R as O}from"./index-c013ead5.js";import{b as I,g as N,$ as k}from"./useFocusWithin-94824ed6.js";const v=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},l=e=>e&&"window"in e&&e.window===e?e:v(e).defaultView||window,B=new Set(["id"]),G=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),j=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),W=/^(data-.*)$/;function be(e,n={}){let{labelable:t,isLink:r,propNames:o}=n,i={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(B.has(a)||t&&G.has(a)||r&&j.has(a)||o!=null&&o.has(a)||W.test(a))&&(i[a]=e[a]);return i}function S(e){if(R())e.focus({preventScroll:!0});else{let n=U(e);e.focus(),z(n)}}let E=null;function R(){if(E==null){E=!1;try{document.createElement("div").focus({get preventScroll(){return E=!0,!0}})}catch{}}return E}function U(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function z(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function w(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function P(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function C(){return P(/^Mac/i)}function V(){return P(/^iPhone/i)}function q(){return P(/^iPad/i)||C()&&navigator.maxTouchPoints>1}function $e(){return V()||q()}function ve(){return w(/AppleWebKit/i)&&!Y()}function Y(){return w(/Chrome/i)}function F(){return w(/Android/i)}function pe(){return w(/Firefox/i)}let $=new Map,L=new Set;function D(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let n=r=>{if(!e(r)||!r.target)return;let o=$.get(r.target);o||(o=new Set,$.set(r.target,o),r.target.addEventListener("transitioncancel",t,{once:!0})),o.add(r.propertyName)},t=r=>{if(!e(r)||!r.target)return;let o=$.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",t),$.delete(r.target)),$.size===0)){for(let i of L)i();L.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?D():document.addEventListener("DOMContentLoaded",D));function J(e){requestAnimationFrame(()=>{$.size===0?e():L.add(e)})}function me(){let e=f.useRef(new Map),n=f.useCallback((o,i,a,d)=>{let c=d!=null&&d.once?(...p)=>{e.current.delete(a),a(...p)}:a;e.current.set(a,{type:i,eventTarget:o,fn:c,options:d}),o.addEventListener(i,a,d)},[]),t=f.useCallback((o,i,a,d)=>{var c;let p=((c=e.current.get(a))===null||c===void 0?void 0:c.fn)||a;o.removeEventListener(i,p,d),e.current.delete(a)},[]),r=f.useCallback(()=>{e.current.forEach((o,i)=>{t(o.eventTarget,o.type,i,o.options)})},[t]);return f.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:t,removeAllGlobalListeners:r}}function Q(e,n){I(()=>{if(e&&e.ref&&n)return e.ref.current=n.current,()=>{e.ref&&(e.ref.current=null)}})}function X(e){return e.mozInputSource===0&&e.isTrusted?!0:F()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Ee(e){return!F()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function Z(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const i=f.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),o&&o(!1),!0},[r,o]),a=N(i),d=f.useCallback(c=>{const p=v(c.target);c.target===c.currentTarget&&p.activeElement===c.target&&(t&&t(c),o&&o(!0),a(c))},[o,t,a]);return{focusProps:{onFocus:!n&&(t||o||r)?d:void 0,onBlur:!n&&(r||o)?i:void 0}}}let b=null,h=new Set,m=new Map,s=!1,x=!1;const ee={Tab:!0,Escape:!0};function y(e,n){for(let t of h)t(e,n)}function te(e){return!(e.metaKey||!C()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function g(e){s=!0,te(e)&&(b="keyboard",y("keyboard",e))}function u(e){b="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(s=!0,y("pointer",e))}function H(e){X(e)&&(s=!0,b="virtual")}function _(e){e.target===window||e.target===document||(!s&&!x&&(b="virtual",y("virtual",e)),s=!1,x=!1)}function K(){s=!1,x=!0}function T(e){if(typeof window>"u"||m.get(l(e)))return;const n=l(e),t=v(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){s=!0,r.apply(this,arguments)},t.addEventListener("keydown",g,!0),t.addEventListener("keyup",g,!0),t.addEventListener("click",H,!0),n.addEventListener("focus",_,!0),n.addEventListener("blur",K,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",u,!0),t.addEventListener("pointermove",u,!0),t.addEventListener("pointerup",u,!0)):(t.addEventListener("mousedown",u,!0),t.addEventListener("mousemove",u,!0),t.addEventListener("mouseup",u,!0)),n.addEventListener("beforeunload",()=>{A(e)},{once:!0}),m.set(n,{focus:r})}const A=(e,n)=>{const t=l(e),r=v(e);n&&r.removeEventListener("DOMContentLoaded",n),m.has(t)&&(t.HTMLElement.prototype.focus=m.get(t).focus,r.removeEventListener("keydown",g,!0),r.removeEventListener("keyup",g,!0),r.removeEventListener("click",H,!0),t.removeEventListener("focus",_,!0),t.removeEventListener("blur",K,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",u,!0),r.removeEventListener("pointermove",u,!0),r.removeEventListener("pointerup",u,!0)):(r.removeEventListener("mousedown",u,!0),r.removeEventListener("mousemove",u,!0),r.removeEventListener("mouseup",u,!0)),m.delete(t))};function ne(e){const n=v(e);let t;return n.readyState!=="loading"?T(e):(t=()=>{T(e)},n.addEventListener("DOMContentLoaded",t)),()=>A(e,t)}typeof document<"u"&&ne();function re(){return b!=="pointer"}function oe(){return b}function ge(e){b=e,y(e,null)}const ae=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ie(e,n,t){var r;const o=typeof window<"u"?l(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?l(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?l(t==null?void 0:t.target).HTMLElement:HTMLElement,d=typeof window<"u"?l(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!ae.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof i||(t==null?void 0:t.target)instanceof a&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof d&&!ee[t.key])}function we(e,n,t){T(),f.useEffect(()=>{let r=(o,i)=>{ie(!!(t!=null&&t.isTextInput),o,i)&&e(re())};return h.add(r),()=>{h.delete(r)}},n)}function M(e){if(!e)return;let n=!0;return t=>{let r={...t,preventDefault(){t.preventDefault()},isDefaultPrevented(){return t.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){n=!1}};e(r),n&&t.stopPropagation()}}function ce(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:M(e.onKeyDown),onKeyUp:M(e.onKeyUp)}}}function de(e){const n=v(e);if(oe()==="virtual"){let t=n.activeElement;J(()=>{n.activeElement===t&&e.isConnected&&S(e)})}else S(e)}let ue=O.createContext(null);function fe(e){let n=f.useContext(ue)||{};Q(n,e);let{ref:t,...r}=n;return r}function ye(e,n){let{focusProps:t}=Z(e),{keyboardProps:r}=ce(e),o=k(t,r),i=fe(n),a=e.isDisabled?{}:i,d=f.useRef(e.autoFocus);return f.useEffect(()=>{d.current&&n.current&&de(n.current),d.current=!1},[n]),{focusableProps:k({...o,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},a)}}export{$e as $,v as a,J as b,re as c,we as d,Z as e,pe as f,C as g,ve as h,q as i,S as j,me as k,Ee as l,X as m,l as n,Q as o,ye as p,be as q,ge as r,ce as s,V as t,F as u,de as v,oe as w};
