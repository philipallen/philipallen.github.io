import{a as K,d as x,k as w,b as v,c as y}from"./utils-BPOuYIA2.js";import{r as n,e as m}from"./index-CcKhGcwW.js";import{$ as T}from"./useControlledState-Bw1hdnkP.js";import{b as C}from"./Button-DPtumZN7.js";import{c as E}from"./FocusScope-DImX_wcQ.js";import{$ as F}from"./filterDOMProps-CeZl_uWj.js";import{c as M}from"./useNumberFormatter-Be2B0OXy.js";import{$ as B}from"./useToggleState-eLSQACY8.js";import{a as z,$ as p}from"./useFocusRing-G-z0GAlQ.js";function D(t,e,a){const{isSelected:i}=e,{isPressed:s,buttonProps:l}=C({...t,onPress:K(e.toggle,t.onPress)},a);return{isPressed:s,isSelected:i,isDisabled:t.isDisabled||!1,buttonProps:x(l,{"aria-pressed":i})}}function R(t,e){const{"aria-label":a,"aria-labelledby":i,orientation:s="horizontal"}=t;let[l,r]=n.useState(!1);w(()=>{var d;r(!!(e.current&&(!((d=e.current.parentElement)===null||d===void 0)&&d.closest('[role="toolbar"]'))))});const{direction:o}=M(),u=o==="rtl"&&s==="horizontal";let f=E(e);const $=d=>{if(d.currentTarget.contains(d.target)){if(s==="horizontal"&&d.key==="ArrowRight"||s==="vertical"&&d.key==="ArrowDown")u?f.focusPrevious():f.focusNext();else if(s==="horizontal"&&d.key==="ArrowLeft"||s==="vertical"&&d.key==="ArrowUp")u?f.focusNext():f.focusPrevious();else if(d.key==="Tab"){d.stopPropagation(),c.current=document.activeElement,d.shiftKey?f.focusFirst():f.focusLast();return}else return;d.stopPropagation(),d.preventDefault()}},c=n.useRef(null),P=d=>{!d.currentTarget.contains(d.relatedTarget)&&!c.current&&(c.current=d.target)},g=d=>{var b;if(c.current&&!d.currentTarget.contains(d.relatedTarget)&&(!((b=e.current)===null||b===void 0)&&b.contains(d.target))){var S;(S=c.current)===null||S===void 0||S.focus(),c.current=null}};return{toolbarProps:{...F(t,{labelable:!0}),role:l?"group":"toolbar","aria-orientation":s,"aria-label":a,"aria-labelledby":a==null?i:void 0,onKeyDownCapture:l?void 0:$,onFocusCapture:l?void 0:g,onBlurCapture:l?void 0:P}}}function A(t,e,a){let{isDisabled:i}=t,{toolbarProps:s}=R(t,a);return{groupProps:{...s,role:e.selectionMode==="single"?"radiogroup":s.role,"aria-disabled":i}}}function L(t,e,a){let i={isSelected:e.selectedKeys.has(t.id),setSelected(u){e.setSelected(t.id,u)},toggle(){e.toggleKey(t.id)}},{isPressed:s,isSelected:l,isDisabled:r,buttonProps:o}=D({...t,id:void 0,isDisabled:t.isDisabled||e.isDisabled},i,a);return e.selectionMode==="single"&&(o.role="radio",o["aria-checked"]=i.isSelected,delete o["aria-pressed"]),{isPressed:s,isSelected:l,isDisabled:r,buttonProps:o}}function N(t){let{selectionMode:e="single",disallowEmptySelection:a,isDisabled:i=!1}=t,[s,l]=T(n.useMemo(()=>t.selectedKeys?new Set(t.selectedKeys):void 0,[t.selectedKeys]),n.useMemo(()=>t.defaultSelectedKeys?new Set(t.defaultSelectedKeys):new Set,[t.defaultSelectedKeys]),t.onSelectionChange);return{selectionMode:e,isDisabled:i,selectedKeys:s,setSelectedKeys:l,toggleKey(r){let o;e==="multiple"?(o=new Set(s),o.has(r)&&(!a||o.size>1)?o.delete(r):o.add(r)):o=new Set(s.has(r)&&!a?[]:[r]),l(o)},setSelected(r,o){o!==s.has(r)&&this.toggleKey(r)}}}const k=n.createContext({}),h=n.createContext(null),Q=n.forwardRef(function(e,a){[e,a]=v(e,a,k);let i=N(e),{groupProps:s}=A(e,i,a),l=y({...e,values:{isDisabled:i.isDisabled,state:i},defaultClassName:"react-aria-ToggleButtonGroup"});return m.createElement("div",{...s,...l,ref:a,slot:e.slot||void 0,"data-orientation":e.orientation||"horizontal","data-disabled":e.isDisabled||void 0},m.createElement(h.Provider,{value:i},l.children))}),H=n.createContext({}),W=n.forwardRef(function(e,a){[e,a]=v(e,a,H);let i=n.useContext(h),s=B(i&&e.id!=null?{isSelected:i.selectedKeys.has(e.id),onChange(b){i.setSelected(e.id,b)}}:e),{buttonProps:l,isPressed:r,isSelected:o,isDisabled:u}=i&&e.id!=null?L({...e,id:e.id},i,a):D({...e,id:e.id!=null?String(e.id):void 0},s,a),{focusProps:f,isFocused:$,isFocusVisible:c}=z(e),{hoverProps:P,isHovered:g}=p(e),d=y({...e,id:void 0,values:{isHovered:g,isPressed:r,isFocused:$,isSelected:s.isSelected,isFocusVisible:c,isDisabled:u,state:s},defaultClassName:"react-aria-ToggleButton"});return m.createElement("button",{...x(l,f,P),...d,ref:a,slot:e.slot||void 0,"data-focused":$||void 0,"data-disabled":u||void 0,"data-pressed":r||void 0,"data-selected":o||void 0,"data-hovered":g||void 0,"data-focus-visible":c||void 0})});export{Q as $,W as a};
